![INAV 9.0.1](https://quadmeup.com/assets/inav_7_falcon.png)

# Hello and welcome to INAV 9.0.1

Please carefully read all of this document for the best possible experience and safety.

Contact other pilots, share experiences, suggestions and ask for help on:

<table>
  <body>
<tr>
<td><img width="48" src="https://discord.com/assets/f9bb9c4af2b9c32a2c5ee0014661546d.png"></td>
<td><a href="https://discord.gg/peg2hhbYwN" target="_blank">INAV Discord Server</a></td>
</tr>
    <tr>
      <td><img src="https://upload.wikimedia.org/wikipedia/commons/c/cd/Facebook_logo_%28square%29.png" width="48"></td>
      <td><a href="https://www.facebook.com/groups/INAVOfficial">INAV Official on Facebook</a></td>
    </tr>
  </tbody>
</table>

This is a patch release with bug fixes and new target support. No settings have been renamed or removed, so your 9.0.0 configuration will work without changes.

---

## Changes since 9.0.0

### Bug Fixes
- **CRSF frame length validation** - Fix missing frame length verification when handling CRSF_FRAMETYPE_MSP_REQ/MSP_WRITE, preventing potential buffer issues (#11210, @VoodooChild99)
- **Position estimator corrections** - Fix position and velocity corrections for improved GPS hold and navigation accuracy. Addresses issues #10360, #10391, #10893, #11049 (#11270, @breadoven)
- **Position estimator sanity limit** - Relate correction sanity limit to loop rate for consistent behavior across different loop rates (#11270, @breadoven)
- **STM32H7 DFU mode** - Fix CLI `dfu` command on H743/H750 targets which would reboot as VCP instead of entering DFU mode (#11295, @sensei-hacker)
- **DShot beeper arming loop** - Fix feedback loop where DShot beeper confirmation prevents re-arming by resetting the guard timer on each attempt (#11306, @sensei-hacker)
- **Surface mode Z velocity** - Fix mathematical inconsistency where AGL velocity update used squared acceleration weight factor while altitude update used linear weight factor (#11255, @sensei-hacker)
- **Terra Ranger Evo** - Fix rangefinder driver for TeraRanger Evo sensors (#11311, @error414)

### New Targets
- **AIKONF4V3** - Aikon F405 V3 flight controller (#11284, @sensei-hacker)
- **COREWINGF405WINGV2** - CoreWing F405 Wing V2 (#11291, @MakeSomeFakeNews)

### Build & CI
- **PG struct validation** - Add build-time Parameter Group struct size validation to catch EEPROM-breaking changes before release (#11283, @sensei-hacker)

---

# Upgrading from INAV 9.0.0

1. Download and install the new [INAV Configurator 9.0.1](https://github.com/iNavFlight/inav-configurator/releases)
2. Backup configuration with CLI `diff all` command
3. Flash INAV 9.0.1 - Full Chip Erase is **not** required when upgrading from 9.0.0
4. Restore your settings from CLI or select _Keep current settings_ from the defaults pop-up

---

## ⚠️ Important Upgrade Information (from INAV 8.x)

### Flashing Notes
- **Full chip erase REQUIRED** when upgrading from 8.x
- Back up your configuration with `diff all` before flashing
- Review [9.0.0 Release Notes](https://github.com/iNavFlight/inav/wiki/9.0.0-Release-Notes#incompatible-settings-changes) for breaking changes and incompatible settings

## Upgrading from INAV 8.0

1. Download and install the new [INAV Configurator 9.0.1](https://github.com/iNavFlight/inav-configurator/releases)
2. Backup configuration with CLI `diff all` command or use the _Diff All_ and _Save to file_ buttons.
3. Flash INAV 9.0.1 **WITH** _Full Chip Erase_ option enabled
4. Load your 8.0 `Diff` settings in to the CLI. Then take a note or write down the incompatible settings changes marked in RED.
5. Then copy your 8.0 `Diff` file and rename it 9.0. And edit the old incompatible settings.
6. Go to CLI and load your edited INAV 9.0 `Diff`
7. Done

>[!Tip]
> **Concerning step 6**.
> It can be a safer option to load your `Diff All` settings in two parts if you are using multiple Profiles. e.g. _Control, Mixer or Battery_.
>This can be done by copying and loading the `Diff All` text setting from the top, down to the bottom of the `# master` settings category. Then load that into the CLI and press enter. Once it has written, press the _Save Settings_ button.
>Wait until it reboots and go back to the CLI tab again, then copy and load the rest of the `Diff All` text file. Starting from the `# Control_profile 1` settings category, down to the bottom. Press enter. Once written, it will save by itself.

## Diff update tool
Rather than steps 4 and 5 above. You can try this diff update tool. This is a work in progress. Currently it will try to update version 7 or later diffs to version 8 or later. Just paste your full `diff all` (not `dump`) in to the tool. Select the INAV version you're upgrading to. Then press the button. It will create a new `diff` for you and give you warnings about anything you should check.

[INAV CLI Update Tool](https://mrd-rc.com/iNav/INAV-CLI-Update.php)

## Upgrading from older versions

Please follow the instructions on [this](https://github.com/iNavFlight/inav/wiki/Upgrading-from-an-older-version-of-INAV-to-the-current-version) page.

- Check the [9.0.0 Release Notes Wiki](https://github.com/iNavFlight/inav/wiki/9.0.0-Release-Notes) for further information

---

## Major Changes in INAV 9.x Since 8.0.1

### JavaScript Logic Conditions

### Navigation & Flight Control
- Improved fixed-wing altitude control with two selectable methods
- Enhanced position estimator Z velocity accuracy
- Position estimator corrections fix for improved GPS hold accuracy
- Temperature compensation for accelerometers and barometers
- Improved VTOL tilt-rotor support with servo speed filtering
- Enhanced magless multicopter yaw estimation
- Improved fixed-wing flight detection for auto-disarm
- Airspeed based PID Attenuation (APA)
- GPS-based pitot sensor validation with automatic fallback to virtual airspeed on sensor failure

### OSD & Telemetry
- Rebranded "Vario" as Vertical Speed Indicator
- Enhanced ADSB aircraft warnings with extended OSD glyphs
- New vertical digital throttle gauge display
- Barometer altitude integrated into CRSF telemetry
- New OSD elements: VERTICAL_SPEED_INDICATOR, ADSB_WARNING, ADSB_INFO, THROTTLE_GAUGE, NAV_MIN_GROUND_SPEED
- Increased flexibility for fixedwing minimum ground speed settings
- SmartPort telemetry: Configure sensors for OpenTX widgets and ETHOS dashboards

### Maps & Mission Planning
- Bing Maps replaced with Esri World Imagery (no API key needed)
- Better imagery quality and reliability

### Programming & Logic
- Programming Framework enables dynamic minimum ground speed adjustment
- Extended MSP override capability to 32-bit channels
- Add MSP2_INAV_SET_GVAR command for global variable manipulation
- Add MSP2_INAV_LOGIC_CONDITIONS_CONFIGURED command for optimized loading

### Hardware Support
- **New Targets** (34+ additional flight controller targets including):
  - AIKONF4V3: Aikon F405 V3
  - COREWINGF405WINGV2: CoreWing F405 Wing V2
  - VANTAC_RF007: FrSky/Rotorflight Vantac RF007 with magnetometer support
  - OMNIBUSF4V3_ICM: New target variant
  - BLUEBERRYF435WING target added
  - RADIOLINKF722: Add W25Q128 flash chip support
- **New Sensors**:
  - QMC5883P magnetometer driver
  - Puya PY25Q128HA flash chip support (16MB SPI NOR)

### Bug Fixes
- **USB MSC (Mass Storage)**: Fix H743 USB MSC regression, add timeout protection and retry logic for SD card access
- **Power Limiting**: Fix power limiting treating 0 (disabled) as less than continuous current
- **CRSF Telemetry**: Fix buffer overflow and dashboard sizeof bug
- **CRSF MSP**: Fix missing frame length verification for CRSF MSP requests
- **Logic Conditions**: Guard against increasing max conditions beyond 64
- **Critical Bugs**: Fix integer overflow and buffer overrun issues (cppcheck)
- **Blackbox**: Fix MOTORS condition mismatch causing null byte padding in logs
- **STM32H7 DFU**: Fix CLI `dfu` command on H743/H750 targets
- **DShot Beeper**: Fix arming feedback loop caused by DShot beeper guard timer
- **AGL Velocity Estimation**: Fix squared acceleration weight factor inconsistency in AGL velocity update
- **Terra Ranger Evo**: Fix rangefinder driver for TeraRanger Evo sensors
- Mission control waypoint landing functionality fixes
- Servo mixer overflow issues fixed
- Fixedwing level pitch trim accuracy improvements

### Performance & Improvements
- Flight counter addition to statistics tracking
- Airspeed TPA: Add pitch angle aware TPA with airspeed support
- Raise pitot_lpf_milli_hz default for better pitot performance
- MSP_REBOOT DFU mode parameter for entering bootloader via MSP

### Localization
- Ukrainian language now available
- Expanded language support across configurator

### Build/CI & Development
- Include cygwin1.dll in Windows SITL artifact (fixes Windows SITL)
- Build-time Parameter Group struct size validation
- Add maintenance-9.x to nightly build workflow
- MSP Protocol: Deprecate MSP command 8226, add enum parsing improvements
- Add maintenance branch workflow documentation
- Add release creation guide

### Documentation
- Add Power and Current Limiting documentation
- Update JavaScript Programming documentation for namespaced syntax
- Improve DEBUG mode documentation
- Add prominent configurator download links to README
- Update OSD element documentation
- Fix Settings.md documentation to match settings.yaml definitions
- Update LedStrip.md documentation

---

**Full Changelog (since 9.0.0):** https://github.com/iNavFlight/inav/compare/9.0.0...9.0.1
**Full Changelog (since 8.0.1):** https://github.com/iNavFlight/inav/compare/8.0.1...9.0.1
**Wiki Release Notes:** https://github.com/iNavFlight/inav/wiki/9.0.0-Release-Notes
