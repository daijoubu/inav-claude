# INAV 9.0.0 Firmware Release

**Stable Release**

This is the stable 9.0.0 release. For a complete list of changes since 8.0.1, please see the [9.0.0 Release Notes Wiki](https://github.com/iNavFlight/inav/wiki/9.0.0-Release-Notes).

---

## Changes in 9.0.0 (since RC4)

### New Features
- **Pitot Sensor Validation**: GPS-based pitot sensor validation with automatic fallback to virtual airspeed on sensor failure (#11222)
  - Adds defensive airspeed clamping to prevent division issues
  - Improves safety for fixed-wing aircraft with pitot sensors
- **MSP_REBOOT DFU Mode**: Add optional DFU mode parameter to MSP_REBOOT command for entering bootloader (#11238)
  - Enables firmware flashing without physical button press
  - Adds payload size validation for command safety

### Bug Fixes
- **Blackbox**: Fix MOTORS condition mismatch causing null byte padding in logs (#11220)
- **APA (Airspeed Pitch Assist)**: Improve safety by reducing I-term scaling and maximum gain limits
- **Airspeed TPA**: Adjust TPA parameters for better fixed-wing aircraft performance
- **Documentation**: Fix Settings.md documentation to match settings.yaml definitions

### Target Changes
- **VANTAC_RF007**: Add new FrSky/Rotorflight Vantac RF007 target with magnetometer support (#11082)
- **RADIOLINKF722**: Add W25Q128 flash chip support (#11232)

### Documentation
- **Blackbox DEBUG**: Improve DEBUG mode documentation (#11239)
- **README**: Add prominent configurator download links (#11221)
- **OSD Elements**: Update OSD element documentation

### Build/CI
- **Nightly Builds**: Add maintenance-9.x to nightly build workflow (#11204)
- **MSP Protocol**: Deprecate MSP command 8226, add enum parsing improvements (#11185)

---

## Major Changes in 9.0 Since 8.0.1

This section combines all significant changes across RC1, RC2, RC3, and RC4.

### JavaScript Logic Conditions
- Full JavaScript syntax support for custom programming
- Active column repositioned for improved logical flow
- Ternary operator support (`condition ? a : b`)
- `let`/`const` variable support with proper scoping
- PID operand support for compile/decompile
- `flight.mode.*` API for checking active flight modes
- Major improvements to round-trip compilation reliability
- Fixed CSE (common subexpression elimination) mutation bug
- Improved decompiler readability with expression hoisting

### Navigation & Flight Control
- Improved fixed-wing altitude control with two selectable methods
- Enhanced position estimator Z velocity accuracy
- Temperature compensation for accelerometers and barometers
- Improved VTOL tilt-rotor support with servo speed filtering
- Enhanced magless multicopter yaw estimation
- Improved fixed-wing flight detection for auto-disarm
- Pitot sensor GPS-based validation with automatic fallback to virtual airspeed
- Defensive airspeed clamping to prevent division issues

### OSD & Telemetry
- Rebranded "Vario" as Vertical Speed Indicator
- Enhanced ADSB aircraft warnings with extended OSD glyphs
- New vertical digital throttle gauge display
- Barometer altitude integrated into CRSF telemetry
- New OSD elements: VERTICAL_SPEED_INDICATOR, ADSB_WARNING, ADSB_INFO, THROTTLE_GAUGE, NAV_MIN_GROUND_SPEED
- Increased flexibility for fixedwing minimum ground speed settings
- SmartPort telemetry: Configure sensors for OpenTX widgets and ETHOS dashboards

### Maps & Mission Planning
- Bing Maps replaced with Esri World Imagery (no API key needed)
- Better imagery quality and reliability

### Programming & Logic
- Programming Framework enables dynamic minimum ground speed adjustment
- Extended MSP override capability to 32-bit channels
- Add MSP2_INAV_SET_GVAR command for global variable manipulation
- Add MSP2_INAV_LOGIC_CONDITIONS_CONFIGURED command for optimized loading

### Hardware Support
- **New Targets** (32+ additional flight controller targets including):
  - VANTAC_RF007: New FrSky/Rotorflight Vantac RF007 target with magnetometer support
  - OMNIBUSF4V3_ICM: New target variant
  - BLUEBERRYF435WING target added
  - RADIOLINKF722: Add W25Q128 flash chip support
- **New Sensors**:
  - QMC5883P magnetometer driver
  - Puya PY25Q128HA flash chip support (16MB SPI NOR)
- **Target Fixes**:
  - Fix missing magnetometer support on NEXUSX target
  - BLUEBERRYF435WING: Disable dynamic notch filter by default

### Bug Fixes
- **USB MSC (Mass Storage)**: Fix H743 USB MSC regression, add timeout protection and retry logic for SD card access
- **Power Limiting**: Fix power limiting treating 0 (disabled) as less than continuous current
- **CRSF Telemetry**: Fix buffer overflow and dashboard sizeof bug
- **Airspeed TPA**: Fix floating-point division in throttle adjustment calculation
- **Logic Conditions**: Guard against increasing max conditions beyond 64
- **Critical Bugs**: Fix integer overflow and buffer overrun issues (cppcheck)
- **Blackbox**: Fix MOTORS condition mismatch causing null byte padding in logs
- **APA (Airspeed Pitch Assist)**: Improve safety by reducing I-term scaling and maximum gain limits
- Mission control waypoint landing functionality fixes
- Servo mixer overflow issues fixed
- Fixedwing level pitch trim accuracy improvements

### Performance & Improvements
- Flight counter addition to statistics tracking
- Airspeed TPA: Add pitch angle aware TPA with airspeed support
- Raise pitot_lpf_milli_hz default for better pitot performance

### Localization
- Ukrainian language now available
- Expanded language support across configurator

### Build/CI & Development
- Include cygwin1.dll in Windows SITL artifact (fixes Windows SITL)
- Add maintenance-9.x to nightly build workflow
- MSP Protocol: Deprecate MSP command 8226, add enum parsing improvements
- Add maintenance branch workflow documentation
- Add release creation guide

### Documentation
- Add Power and Current Limiting documentation
- Update JavaScript Programming documentation for namespaced syntax
- Improve DEBUG mode documentation
- Add prominent configurator download links to README
- Update OSD element documentation
- Fix Settings.md documentation to match settings.yaml definitions
- Update LedStrip.md documentation

---

## ⚠️ Important Upgrade Information

### Flashing Notes
- **Full chip erase REQUIRED** when upgrading from 8.x
- Back up your configuration with `diff all` before flashing
- Review [9.0.0 Release Notes](https://github.com/iNavFlight/inav/wiki/9.0.0-Release-Notes) for breaking changes and incompatible settings

### Incompatible Settings Changes

The following CLI settings have been renamed or changed in INAV 9.0. When loading an older `diff all`, these will show errors:

**Renamed Settings:**
- Check the [9.0.0 Release Notes Wiki](https://github.com/iNavFlight/inav/wiki/9.0.0-Release-Notes) for complete list

**Migration Instructions:**
1. Export configuration from 8.x: CLI → `diff all` → Save to file
2. Flash 9.0.0 firmware with **Full Chip Erase**
3. Review and update your saved diff for any renamed/removed settings
4. Load edited diff into new CLI

---

**Full Changelog:** https://github.com/iNavFlight/inav/compare/8.0.1...9.0.0

**Wiki Release Notes:** https://github.com/iNavFlight/inav/wiki/9.0.0-Release-Notes
