Keyword: timer
Occurrences: 2274
================================================================================

Page   17: 17.4.9       DMA2D AXI master port timer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 702
Page   18: 17.6.20 DMA2D AXI master timer configuration register (DMA2D_AMTCR) . . 726
Page   29: 29.8.15 DFSDM filter x conversion timer register (DFSDM_FLTxCNVTIMR) . 1143
Page   35: 36       High-Resolution Timer (HRTIM) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1339
Page   35: 36.3.4       Timer A..E timing units . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1347
Page   35: 36.3.5       Master timer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1364
Page   35: 36.3.11 Events propagation within or across multiple timers . . . . . . . . . . . . . 1385
Page   35: 36.3.17 Synchronizing the HRTIM with other timers or HRTIM instances . . . 1407
Page   36: 36.5.1      HRTIM Master Timer Control Register (HRTIM_MCR) . . . . . . . . . . . 1426
Page   36: 36.5.2      HRTIM Master Timer Interrupt Status Register (HRTIM_MISR) . . . . 1429
Page   36: 36.5.3      HRTIM Master Timer Interrupt Clear Register (HRTIM_MICR) . . . . . 1430
Page   36: 36.5.4      HRTIM Master Timer DMA / Interrupt Enable Register
Page   36: 36.5.5      HRTIM Master Timer Counter Register (HRTIM_MCNTR) . . . . . . . . 1433
Page   36: 36.5.6      HRTIM Master Timer Period Register (HRTIM_MPER) . . . . . . . . . . . 1433
Page   36: 36.5.7      HRTIM Master Timer Repetition Register (HRTIM_MREP) . . . . . . . . 1434
Page   36: 36.5.8      HRTIM Master Timer Compare 1 Register (HRTIM_MCMP1R) . . . . 1434
Page   36: 36.5.9      HRTIM Master Timer Compare 2 Register (HRTIM_MCMP2R) . . . . 1435
Page   36: 36.5.10 HRTIM Master Timer Compare 3 Register (HRTIM_MCMP3R) . . . . 1435
Page   36: 36.5.11 HRTIM Master Timer Compare 4 Register (HRTIM_MCMP4R) . . . . 1436
Page   36: 36.5.12 HRTIM Timerx Control Register (HRTIM_TIMxCR) . . . . . . . . . . . . . . 1437
Page   36: 36.5.13 HRTIM Timerx Interrupt Status Register (HRTIM_TIMxISR) . . . . . . . 1441
Page   36: 36.5.14 HRTIM Timerx Interrupt Clear Register (HRTIM_TIMxICR) . . . . . . . 1443
Page   36: 36.5.15 HRTIM Timerx DMA / Interrupt Enable Register
Page   36: 36.5.16 HRTIM Timerx Counter Register (HRTIM_CNTxR) . . . . . . . . . . . . . . 1447
Page   36: 36.5.17 HRTIM Timerx Period Register (HRTIM_PERxR) . . . . . . . . . . . . . . . 1447
Page   36: 36.5.18 HRTIM Timerx Repetition Register (HRTIM_REPxR) . . . . . . . . . . . . 1448
Page   36: 36.5.19 HRTIM Timerx Compare 1 Register (HRTIM_CMP1xR) . . . . . . . . . . 1448
Page   36: 36.5.20 HRTIM Timerx Compare 1 Compound Register
Page   36: 36.5.21 HRTIM Timerx Compare 2 Register (HRTIM_CMP2xR) . . . . . . . . . . 1449
Page   36: 36.5.22 HRTIM Timerx Compare 3 Register (HRTIM_CMP3xR) . . . . . . . . . . 1450
Page   36: 36.5.23 HRTIM Timerx Compare 4 Register (HRTIM_CMP4xR) . . . . . . . . . . 1450
Page   36: 36.5.24 HRTIM Timerx Capture 1 Register (HRTIM_CPT1xR) . . . . . . . . . . . 1451
Page   36: 36.5.25 HRTIM Timerx Capture 2 Register (HRTIM_CPT2xR) . . . . . . . . . . . 1451
Page   36: 36.5.26 HRTIM Timerx Deadtime Register (HRTIM_DTxR) . . . . . . . . . . . . . . 1452
Page   36: 36.5.27 HRTIM Timerx Output1 Set Register (HRTIM_SETx1R) . . . . . . . . . . 1454
Page   36: 36.5.28 HRTIM Timerx Output1 Reset Register (HRTIM_RSTx1R) . . . . . . . . 1456
Page   36: 36.5.29 HRTIM Timerx Output2 Set Register (HRTIM_SETx2R) . . . . . . . . . . 1456
Page   36: 36.5.30 HRTIM Timerx Output2 Reset Register (HRTIM_RSTx2R) . . . . . . . . 1457
Page   36: 36.5.31 HRTIM Timerx External Event Filtering Register 1
Page   36: 36.5.32 HRTIM Timerx External Event Filtering Register 2
Page   37: 36.5.33 HRTIM Timerx Reset Register (HRTIM_RSTxR) . . . . . . . . . . . . . . . . 1461
Page   37: 36.5.34 HRTIM Timerx Chopper Register (HRTIM_CHPxR) . . . . . . . . . . . . . 1464
Page   37: 36.5.35 HRTIM Timerx Capture 1 Control Register (HRTIM_CPT1xCR) . . . . 1466
Page   37: 36.5.36 HRTIM Timerx Capture 2 Control Register (HRTIM_CPT2xCR) . . . . 1467
Page   37: 36.5.37 HRTIM Timerx Output Register (HRTIM_OUTxR) . . . . . . . . . . . . . . . 1470
Page   37: 36.5.38 HRTIM Timerx Fault Register (HRTIM_FLTxR) . . . . . . . . . . . . . . . . . 1473
Page   37: 36.5.51 HRTIM Timer External Event Control Register 1 (HRTIM_EECR1) . 1488
Page   37: 36.5.52 HRTIM Timer External Event Control Register 2 (HRTIM_EECR2) . 1490
Page   37: 36.5.53 HRTIM Timer External Event Control Register 3 (HRTIM_EECR3) . 1491
Page   37: 36.5.60 HRTIM Burst DMA Master timer update Register
Page   37: 36.5.61 HRTIM Burst DMA Timerx update Register (HRTIM_BDTxUPR) . . . 1503
Page   37: 37       Advanced-control timers (TIM1/TIM8) . . . . . . . . . . . . . . . . . . . . . . . . 1514
Page   38: 37.3.24 Timer input XOR function . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1564
Page   38: 37.3.26 Timer synchronization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1567
Page   39: 37.4.28 TIM1 timer input selection register (TIM1_TISEL) . . . . . . . . . . . . . . . 1611
Page   39: 37.4.29 TIM8 timer input selection register (TIM8_TISEL) . . . . . . . . . . . . . . . 1611
Page   39: 38       General-purpose timers (TIM2/TIM3/TIM4/TIM5) . . . . . . . . . . . . . . . . 1619
Page   40: 38.3.17 Timer input XOR function . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1653
Page   40: 38.3.18 Timers and external trigger synchronization . . . . . . . . . . . . . . . . . . . 1654
Page   40: 38.3.19 Timer synchronization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1657
Page   40: 38.4.23 TIM2 timer input selection register (TIM2_TISEL) . . . . . . . . . . . . . . . 1687
Page   41: 38.4.24 TIM3 timer input selection register (TIM3_TISEL) . . . . . . . . . . . . . . . 1687
Page   41: 38.4.25 TIM4 timer input selection register (TIM4_TISEL) . . . . . . . . . . . . . . . 1688
Page   41: 38.4.26 TIM5 timer input selection register (TIM5_TISEL) . . . . . . . . . . . . . . . 1689
Page   41: 39       General-purpose timers (TIM12/TIM13/TIM14) . . . . . . . . . . . . . . . . . 1694
Page   41: 39.3.14 Timer input XOR function . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1715
Page   41: 39.3.17 Timer synchronization (TIM12) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1719
Page   42: 39.4.14 TIM12 timer input selection register (TIM12_TISEL) . . . . . . . . . . . . . 1732
Page   42: 39.5.11 TIM13 timer input selection register (TIM13_TISEL) . . . . . . . . . . . . . 1743
Page   42: 39.5.12 TIM14 timer input selection register (TIM14_TISEL) . . . . . . . . . . . . . 1743
Page   42: 40         General-purpose timers (TIM15/TIM16/TIM17) . . . . . . . . . . . . . . . . . 1746
Page   43: 40.4.17 Timer input XOR function (TIM15 only) . . . . . . . . . . . . . . . . . . . . . . . 1777
Page   43: 40.4.21 Timer synchronization (TIM15) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1782
Page   44: 41         Basic timers (TIM6/TIM7) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1830
Page   45: 42       Low-power timer (LPTIM) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1843
Page   45: 42.4.13 Timer enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1856
Page   45: 42.4.14 Timer counter reset . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1856
Page   47: 45.6.6      RTC wakeup timer register (RTC_WUTR) . . . . . . . . . . . . . . . . . . . . . 1918
Page   57: 54.8.7     SDMMC data timer register (SDMMC_DTIMER) . . . . . . . . . . . . . . . 2410
Page   57: 54.8.14 SDMMC acknowledgment timer register (SDMMC_ACKTIMER) . . . 2421
Page   69: Table 52.    Ratio between clock timer and pclk . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 331
Page   73: Table 293.   Timer resolution and min. PWM frequency for fHRTIM = 400 MHz . . . . . . . . . . . . . . . . . 1345
Page   73: Table 295.   Timer operating modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1348
Page   73: Table 296.   Events mapping across Timer A to E . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1353
Page   73: Table 301.   Windowing signals mapping per timer (EEFLTR[3:0] = 1111) . . . . . . . . . . . . . . . . . . . . 1374
Page   74: Table 304.   Master timer update event propagation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1386
Page   74: Table 307.   Update event propagation for a timer reset . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1388
Page   74: Table 309.   Timer output programming for burst mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1392
Page   74: Table 310.   Burst mode clock sources from general purpose timer. . . . . . . . . . . . . . . . . . . . . . . . . . 1394
Page   74: Table 313.   Effect of sync event vs timer operating modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1408
Page   74: Table 317.   HRTIM Register map and reset values: Master timer. . . . . . . . . . . . . . . . . . . . . . . . . . . 1505
Page   74: Table 320.   Behavior of timer outputs versus BRK/BRK2 inputs . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1555
Page   85: Figure 280. High-resolution timer block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1342
Page   85: Figure 281. Timer A..E overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1347
Page   85: Figure 282. Continuous timer operation. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1348
Page   85: Figure 283. Single-shot timer operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1349
Page   85: Figure 284. Timer reset resynchronization (prescaling ratio above 32) . . . . . . . . . . . . . . . . . . . . . . . 1350
Page   86: Figure 299. Master timer overview. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1364
Page   86: Figure 343. Advanced-control timer block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1515
Page   88: Figure 403. General-purpose timer block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1620
Page   88: Figure 446. Master/Slave timer example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1657
Page   89: Figure 452. General-purpose timer block diagram (TIM12) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1695
Page   89: Figure 453. General-purpose timer block diagram (TIM13/TIM14) . . . . . . . . . . . . . . . . . . . . . . . . . . 1696
Page   90: Figure 511. Basic timer block diagram. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1830
Page   90: Figure 521. Low-power timer block diagram (LPTIM1 and LPTIM2) . . . . . . . . . . . . . . . . . . . . . . . . . 1844
Page   90: Figure 522. Low-power timer block diagram (LPTIM3) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1845
Page   90: Figure 523. Low-power timer block diagram (LPTIM4 and LPTIM5) . . . . . . . . . . . . . . . . . . . . . . . . . 1845
Page  308: connected to TIMERS
Page  324: is sent to the break inputs of advanced-control timers (TIM1, TIM8, TIM15, TIM16, and
Page  331: Timers prescaler clock
Page  331: Timers prescaler clock
Page  331: This block also provides the clock for the timers (rcc_timx_ker_ck and rcc_timy_ker_ck).
Page  331: The frequency of the timers clock depends on the APB prescaler corresponding to the bus
Page  331: to which the timer is connected, and on TIMPRE bit. Table 52 shows how to select the timer
Page  331: Table 52. Ratio between clock timer and pclk
Page  331: 0xx                 0         →       Frcc_hclk1                Frcc_hclk1              The timer clock is equal to the bus clock.
Page  331: 101                 0         →     Frcc_hclk1 / 2           Frcc_hclk1 / 4             The timer clock is twice as fast as the bus
Page  332: Table 52. Ratio between clock timer and pclk (continued)
Page  332: 0xx           1       →      Frcc_hclk1          Frcc_hclk1         The timer clock is equal to the bus clock.
Page  332: The timer clock is twice as fast as the bus
Page  332: The timer clock is 4 times faster than the bus
Page  357: In order for the LPTIMER to operate with lse_ck or lsi_ck when the circuit is in Stop mode,
Page  368: Bit 15 TIMPRE: Timers clocks prescaler selection
Page  368: This bit is set and reset by software to control the clock frequency of all the timers connected to
Page  368: 0: The Timers kernel clock is equal to rcc_hclk1 if D2PPREx is corresponding to division by 1 or 2,
Page  368: 1: The Timers kernel clock is equal to rcc_hclk1 if D2PPREx is corresponding to division by 1, 2 or
Page  368: Please refer to Table 52: Ratio between clock timer and pclk
Page  368: Bit 14 HRTIMSEL: High Resolution Timer clock prescaler selection
Page  368: This bit is set and reset by software to control the clock frequency of high resolution the timer
Page  368: 0: The HRTIM prescaler clock source is the same as other timers. (default after reset)
Page  532: HRTIMER Break inputs.
Page  532: 0: AXI-SRAM double ECC error flag disconnected from TIM1/8/15/16/17/HRTIMER
Page  532: 1: AXI-SRAM double ECC error flag connected to TIM1/8/15/16/17/HRTIMER Break
Page  532: HRTIMER Break inputs.
Page  532: 0: ITCM double ECC error flag disconnected from TIM1/8/15/16/17/HRTIMER Break
Page  532: 1: ITCM double ECC error flag connected to TIM1/8/15/16/17/HRTIMER Break inputs
Page  532: HRTIMER Break inputs.
Page  532: 0: DTCM double ECC error flag disconnected from TIM1/8/15/16/17/HRTIMER Break
Page  532: 1: DTCM double ECC error flag connected to TIM1/8/15/16/17/HRTIMER Break inputs
Page  532: HRTIMER Break inputs.
Page  532: 0: D2 SRAM1 double ECC error flag disconnected from TIM1/8/15/16/17/HRTIMER
Page  532: 1: D2 SRAM1 double ECC error flag connected to TIM1/8/15/16/17/HRTIMER Break
Page  533: HRTIMER Break inputs.
Page  533: 0: D2 SRAM2 double ECC error flag disconnected from TIM1/8/15/16/17/HRTIMER
Page  533: 1: D2 SRAM2 double ECC error flag connected to TIM1/8/15/16/17/HRTIMER Break
Page  533: HRTIMER Break inputs.
Page  533: 0: D2 SRAM3 double ECC error flag disconnected from TIM1/8/15/16/17/HRTIMER
Page  533: 1: D2 SRAM3 double ECC error flag connected to TIM1/8/15/16/17/HRTIMER Break
Page  533: HRTIMER Break inputs.
Page  533: 0: D3 SRAM4 double ECC error flag disconnected from TIM1/8/15/16/17/HRTIMER
Page  533: 1: D3 SRAM4 double ECC error flag connected to TIM1/8/15/16/17/HRTIMER Break
Page  533: HRTIMER Break inputs.
Page  533: TIM1/8/15/16/17/HRTIMER Break inputs
Page  533: 1: Backup SRAM double ECC error flag connected to TIM1/8/15/16/17/HRTIMER
Page  533: TIM1/8/15/16/17 and HRTIMER Break inputs.
Page  533: 0: Arm® Cortex®-M7 LOCKUP output disconnected from TIM1/8/15/16/17/HRTIMER
Page  533: 1: Arm® Cortex®-M7 LOCKUP output connected to TIM1/8/15/16/17/HRTIMER Break
Page  534: HRTIMER Break inputs.
Page  534: 0: FLASH double ECC error flag disconnected from TIM1/8/15/16/17/HRTIMER Break
Page  534: 1: FLASH double ECC error flag connected to TIM1/8/15/16/17/HRTIMER Break
Page  534: and lock the PVD connection to TIM1/8/15/16/17 and HRTIMER Break inputs, as well
Page  534: 0: PVD signal disconnected from TIM1/8/15/16/17/HRTIMER Break inputs
Page  534: 1: PVD signal connected to TIM1/8/15/16/17/HRTIMER Break inputs
Page  551: The source output signal disables the timer outputs through a pure combinational logic
Page  575: •   It’s possible to synchronize a peripheral DMA request with a timer, with an external pin
Page  575: be triggered by a timer, by an external pin event, or by a DMA transfer complete of
Page  692: •   Internal timer to control AXI bandwidth
Page  702: 17.4.9       DMA2D AXI master port timer
Page  702: An 8-bit timer is embedded into the AXI master port to provide an optional limitation of the
Page  702: This timer is clocked by the AXI clock and counts a dead time between two consecutive
Page  702: The timer enabling and the dead time value are configured through the AXI master port
Page  702: timer configuration register (DMA2D_AMPTCR).
Page  726: 17.6.20         DMA2D AXI master timer configuration register (DMA2D_AMTCR)
Page  730: -                 6           -            SysTick       System tick timer                  0x0000 003C
Page  735: hrtim1_mst_it    110         103           HRTIM1_MST      HRTIM1 master timer interrupt   0x0000 01DC
Page  735: hrtim1_tima_it    111         104          HRTIM1_TIMA      HRTIM1 timer A interrupt        0x0000 01E0
Page  735: hrtim1_timb_it    112         105           HRTIM_TIMB      HRTIM1 timer B interrupt        0x0000 01E4
Page  735: hrtim1_timc_it    113         106          HRTIM1_TIMC      HRTIM1 timer C interrupt        0x0000 01E8
Page  735: hrtim1_timd_it    114         107          HRTIM1_TIMD      HRTIM1 timer D interrupt        0x0000 01EC
Page  735: hrtim1_time_it    115         108           HRTIM_TIME      HRTIM1 timer E interrupt        0x0000 01F0
Page  736: 145         138            LPTIM2        LPTIM2 timer interrupt            0x0000 0268
Page  736: 146         139            LPTIM3        LPTIM2 timer interrupt            0x0000 026C
Page  736: 147         140            LPTIM4        LPTIM2 timer interrupt            0x0000 0270
Page  736: 148         141            LPTIM5        LPTIM2 timer interrupt            0x0000 0274
Page  747: 19        RTC wakeup timer                   Configurable           Any                 Yes
Page  847: The SDRAM clock stops running after a TRAS delay and the internal refresh timer stops
Page  854: SDRAM refresh timer register (FMC_SDRTR)
Page  854: cycles by configuring the Refresh Timer Count value.
Page  855: This 13-bit field is loaded into a timer which is decremented using the SDRAM clock. This
Page  855: timer generates a refresh pulse when zero is reached. The COUNT value must be set at
Page  855: As soon as the FMC_SDRTR register is programmed, the timer starts counting. If the value
Page  855: Bits 13:1 COUNT[12:0]: Refresh Timer Count
Page  895: –   by hardware triggers with configurable polarity (internal timers events or GPIO
Page  898: be connected to on-chip timers).
Page  898: be connected to on-chip timers).
Page  898: timers. (x = Analog watchdog number 1,2,3)
Page  899: useful when the ADC is triggered by a timer and if the application requires that the ADC is
Page  919: external event (e.g. timer capture, input pins). If the EXTEN[1:0] control bits (for a regular
Page  920: adc_ext_trg0                TIM1_CC1 event               Internal signal from on-chip timers                      00000
Page  920: adc_ext_trg1                TIM1_CC2 event               Internal signal from on-chip timers                      00001
Page  920: adc_ext_trg2                TIM1_CC3 event               Internal signal from on-chip timers                      00010
Page  920: adc_ext_trg3                TIM2_CC2 event               Internal signal from on-chip timers                      00011
Page  920: adc_ext_trg4               TIM3_TRGO event               Internal signal from on-chip timers                      00100
Page  920: adc_ext_trg5                TIM4_CC4 event               Internal signal from on-chip timers                      00101
Page  920: adc_ext_trg7               TIM8_TRGO event               Internal signal from on-chip timers                      00111
Page  920: adc_ext_trg8               TIM8_TRGO2 event              Internal signal from on-chip timers                      01000
Page  921: adc_ext_trg9          TIM1_TRGO event          Internal signal from on-chip timers      01001
Page  921: adc_ext_trg10         TIM1_TRGO2 event          Internal signal from on-chip timers      01010
Page  921: adc_ext_trg11          TIM2_TRGO event          Internal signal from on-chip timers      01011
Page  921: adc_ext_trg12          TIM4_TRGO event          Internal signal from on-chip timers      01100
Page  921: adc_ext_trg13          TIM6_TRGO event          Internal signal from on-chip timers      01101
Page  921: adc_ext_trg14         TIM15_TRGO event         Internal signal from on-chip timers       01110
Page  921: adc_ext_trg15           TIM3_CC4 event          Internal signal from on-chip timers      01111
Page  921: adc_ext_trg16       HRTIM1_ADCTRG1 event       Internal signal from on-chip timers       10000
Page  921: adc_ext_trg17       HRTIM1_ADCTRG3 event       Internal signal from on-chip timers       10001
Page  921: adc_ext_trg18         LPTIM1_OUT event         Internal signal from on-chip timers       10010
Page  921: adc_ext_trg19         LPTIM2_OUT event         Internal signal from on-chip timers       10011
Page  921: adc_ext_trg20         LPTIM3_OUT event         Internal signal from on-chip timers       10100
Page  921: adc_jext_trg0          TIM1_TRGO event         Internal signal from on-chip timers       00000
Page  921: adc_jext_trg1           TIM1_CC4 event          Internal signal from on-chip timers      00001
Page  921: adc_jext_trg2          TIM2_TRGO event         Internal signal from on-chip timers       00010
Page  921: adc_jext_trg3           TIM2_CC1 event          Internal signal from on-chip timers      00011
Page  921: adc_jext_trg4           TIM3_CC4 event         Internal signal from on-chip timers       00100
Page  921: adc_jext_trg5          TIM4_TRGO event         Internal signal from on-chip timers       00101
Page  921: adc_jext_trg7           TIM8_CC4 event         Internal signal from on-chip timers       00111
Page  921: adc_jext_trg8         TIM1_TRGO2 event         Internal signal from on-chip timers       01000
Page  922: adc_jext_trg9            TIM8_TRGO event             Internal signal from on-chip timers      01001
Page  922: adc_jext_trg10          TIM8_TRGO2 event             Internal signal from on-chip timers      01010
Page  922: adc_jext_trg11            TIM3_CC3 event             Internal signal from on-chip timers      01011
Page  922: adc_jext_trg12           TIM3_TRGO event             Internal signal from on-chip timers      01100
Page  922: adc_jext_trg13            TIM3_CC1 event             Internal signal from on-chip timers      01101
Page  922: adc_jext_trg14           TIM6_TRGO event             Internal signal from on-chip timers      01110
Page  922: adc_jext_trg15          TIM15_TRGO event             Internal signal from on-chip timers      01111
Page  922: adc_jext_trg16       HRTIM1_ADCTRG2 event            Internal signal from on-chip timers      10000
Page  922: adc_jext_trg17       HRTIM1_ADCTRG4 event            Internal signal from on-chip timers      10001
Page  922: adc_jext_trg18          LPTIM1_OUT event             Internal signal from on-chip timers      10010
Page  922: adc_jext_trg19          LPTIM2_OUT event             Internal signal from on-chip timers      10011
Page  922: adc_jext_trg20          LPTIM3_OUT event             Internal signal from on-chip timers      10100
Page  949: (external trigger) of some on-chip timers. Refer to the on-chip timers section to understand
Page 1013: In all synchronous clock modes, there is no jitter in the delay from a timer trigger to the start
Page 1026: If the TENx control bit is set, conversion can then be triggered by an external event (timer
Page 1026: TIM1_TRGO                            Internal signal from on-chip timers        0001
Page 1026: TIM2_TRGO                            Internal signal from on-chip timers        0010
Page 1026: TIM4_TRGO                            Internal signal from on-chip timers        0011
Page 1026: TIM5_TRGO                            Internal signal from on-chip timers        0100
Page 1026: TIM6_TRGO                            Internal signal from on-chip timers        0101
Page 1026: TIM7_TRGO                            Internal signal from on-chip timers        0110
Page 1026: TIM8_TRGO                            Internal signal from on-chip timers        0111
Page 1026: TIM15_TRGO                           Internal signal from on-chip timers        1000
Page 1026: HRTIM1_DACTRG1                       Internal signal from on-chip timers        1001
Page 1026: HRTIM1_DACTRG2                       Internal signal from on-chip timers        1010
Page 1026: LPTIM1_OUT                           Internal signal from on-chip timers        1011
Page 1026: LPTIM2_OUT                           Internal signal from on-chip timers        1100
Page 1061: •   cycle-by-cycle current control loop when combined with a PWM output from a timer
Page 1061: •   Redirection of outputs to timer inputs for triggering:
Page 1063: The outputs can also be internally redirected to a variety of timer inputs for the following
Page 1063: •    cycle-by-cycle current control, using ETR inputs of timers
Page 1065: switches anti parallel diodes). It uses a blanking window defined with a timer output
Page 1066: PA6              AF10, AF12 (can be used as timer break in)
Page 1066: PA8              AF12 (can be used as timer break in)
Page 1066: PB12              AF13 (can be used as timer break in)
Page 1066: PE6              AF11 (can be used as timer break in)
Page 1066: PE15              AF13 (can be used as timer break in)
Page 1066: PG2              AF11 (can be used as timer break in)
Page 1066: PG3              AF11 (can be used as timer break in)
Page 1066: PG4              AF11 (can be used as timer break in)
Page 1066: PI1              AF11 (can be used as timer break in)
Page 1066: PI4              AF11 (can be used as timer break in)
Page 1066: PK2              AF10, AF11 (can be used as timer break in)
Page 1066: PA6              AF10, AF12 (can be used as timer break in)
Page 1066: PA8              AF12 (can be used as timer break in)
Page 1066: PB12              AF13 (can be used as timer break in)
Page 1066: PE6              AF11 (can be used as timer break in)
Page 1066: PE15              AF13 (can be used as timer break in)
Page 1066: PG2              AF11 (can be used as timer break in)
Page 1066: PG3              AF11 (can be used as timer break in)
Page 1066: PG4              AF11 (can be used as timer break in)
Page 1066: PI1              AF11 (can be used as timer break in)
Page 1066: PI4              AF11 (can be used as timer break in)
Page 1066: PK2              AF10, AF11 (can be used as timer break in)
Page 1067: The outputs of either COMP channel can be redirected to timer break inputs (TIMx_BKIN or
Page 1067: connected to one of GPIOs programmable in alternate function as timer break input. See
Page 1067: COMP output passes through the GPIO to the timer break input. With a pull-up resistor, the
Page 1067: selected GPIO can be used as timer break input logic OR-ed with the comparator output.
Page 1067: To the timer break input                    (x=1,8 ; y=..,2)
Page 1075: timer output controls the COMP channel 2 output blanking.
Page 1096: A flexible timer triggering system can be used to control the start of conversion of DFSDM.
Page 1097: –    internal timers
Page 1101: dfsdm_jtrg26                                             LPTIMER1
Page 1101: dfsdm_jtrg27                                             LPTIMER2
Page 1101: dfsdm_jtrg28                                             LPTIMER3
Page 1109: An external serial clock input frequency can be measured by a timer counting DFSDM
Page 1122: started by timer trigger to emulate the continuous mode with precise timing.
Page 1143: 29.8.15           DFSDM filter x conversion timer register (DFSDM_FLTxCNVTIMR)
Page 1144: Bits 31:4 CNVCNT[27:0]: 28-bit timer counting conversion time t = CNVCNT[27:0] / fDFSDMCLK
Page 1144: The timer has an input clock from DFSDM clock (system clock fDFSDMCLK). Conversion time
Page 1144: Note: When conversion is interrupted (e.g. by disable/enable selected channel) the timer counts also
Page 1339: RM0433                                                              High-Resolution Timer (HRTIM)
Page 1339: 36       High-Resolution Timer (HRTIM)
Page 1339: The high-resolution timer can generate up to 10 digital signals with highly accurate timings.
Page 1339: For control and monitoring purposes, the timer has also timing measure capabilities and
Page 1340: High-Resolution Timer (HRTIM)                                                                     RM0433
Page 1341: RM0433                                                               High-Resolution Timer (HRTIM)
Page 1341: •    The master timer
Page 1341: •    The timing units (Timer A to Timer E)
Page 1341: •    An external event and fault signal conditioning logic that is shared by all timers
Page 1341: The master timer is based on a 16-bit up counter. It can set/reset any of the 10 outputs via 4
Page 1341: compare units and it provides synchronization signals to the 5 timer units. Its main purpose
Page 1341: is to have the timer units controlled by a unique source. An interleaved buck converter is a
Page 1341: typical application example where the master timer manages the phase-shifts between the
Page 1341: The timer units are working either independently or coupled with the other timers including
Page 1341: the master timer. Each timer contains the controls for two outputs. The outputs set/reset
Page 1341: the master timer, from the other timers or from external events.
Page 1341: The burst mode controller can take over the control of one or multiple timers in case of light-
Page 1341: •    Master timer registers
Page 1341: •    Timer A to Timer E registers
Page 1341: •    Common registers for features shared by all timer units
Page 1342: High-Resolution Timer (HRTIM)                                                                                                                                                   RM0433
Page 1342: The block diagram of the timer is shown in Figure 280.
Page 1342: Figure 280. High-resolution timer block diagram
Page 1342: Master Timer
Page 1342: Reset    TIMER A              5
Page 1342: Cross-timer counter reset bus
Page 1342: Reset    TIMER B              5
Page 1342: (a timer controls
Page 1342: Reset    TIMER C              5
Page 1342: Reset    TIMER D              5
Page 1342: Reset       TIMER E
Page 1343: RM0433                                                                          High-Resolution Timer (HRTIM)
Page 1343: HRTIM_CHC1,                         Main HRTIM timer outputs. They can be coupled by pairs (HRTIM_CHx1 &
Page 1343: external timer resources:
Page 1343: hrtim_in_sync[3:1]    Digital Input hrtim_in_sync2: the source is a regular TIMx timer (via on-chip interconnect)
Page 1343: hrtim_evt6[4:1]                   watchdog, TIMx timers, trigger outputs) or off-chip (HRTIM_EEVx input pins)
Page 1344: High-Resolution Timer (HRTIM)                                                                        RM0433
Page 1345: RM0433                                                                       High-Resolution Timer (HRTIM)
Page 1345: Timer clock and prescaler
Page 1345: Each timer in the HRTIM has its own individual clock prescaler, which allows you to adjust
Page 1345: the timer resolution. (See Table 293).
Page 1345: Table 293. Timer resolution and min. PWM frequency for fHRTIM = 400 MHz
Page 1345: and period registers. Once the timer is enabled (MCEN or TxCEN bit set in the
Page 1345: When multiple timers are enabled, the prescalers are synchronized with the prescaler of the
Page 1345: timer that was started first.
Page 1345: and TIMA..E timers only if the counter and output behavior
Page 1345: does not depend on other timers’ information and signals. It
Page 1345: timers when one of the following events is propagated from
Page 1345: one timing unit (or master timer) to another: output set/reset
Page 1346: High-Resolution Timer (HRTIM)                                                                    RM0433
Page 1347: RM0433                                                                              High-Resolution Timer (HRTIM)
Page 1347: 36.3.4        Timer A..E timing units
Page 1347: timer.
Page 1347: Figure 281. Timer A..E overview
Page 1347: Counter              timer       timing  units
Page 1347: timer
Page 1347: timer
Page 1347: timer
Page 1348: High-Resolution Timer (HRTIM)                                                                                RM0433
Page 1348: Timer A..E can operate in continuous (free-running) mode or in single-shot manner where
Page 1348: Table 295. Timer operating modes
Page 1348: Setting the TxEN bit enables the timer but does not start the counter.
Page 1348: Setting the TxEN bit enables the timer but does not start the counter.
Page 1348: Setting the TxEN bit enables the timer and starts the counter
Page 1348: The TxEN bit can be cleared at any time to disable the timer and stop the counting.
Page 1348: Figure 282. Continuous timer operation
Page 1349: RM0433                                                                    High-Resolution Timer (HRTIM)
Page 1349: Figure 283. Single-shot timer operation
Page 1349: If the initial counter value is above the period value when the timer is started, or if a new
Page 1350: High-Resolution Timer (HRTIM)                                                                       RM0433
Page 1350: Timer reset
Page 1350: •     The master timer: Reset and Compare 1..4 (5 events)
Page 1350: •     All other timing units (e.g. Timer B..E for timer A): Compare 1, 2 and 4 (12 events)
Page 1350: Figure 284. Timer reset resynchronization (prescaling ratio above 32)
Page 1350: TA1: Set on Timer A reset event, Reset on Compare 1 = 2                                 MS32261V1
Page 1351: RM0433                                                                       High-Resolution Timer (HRTIM)
Page 1351: timer is enabled (TXCEN bit set). Once the timer has been enabled, any time the counter is
Page 1352: High-Resolution Timer (HRTIM)                                                                               RM0433
Page 1352: –     The master timer: Period, Compare 1..4, HRTIM synchronization (6 events)
Page 1352: –     All other timing units (e.g. Timer B..E for timer A): TIMEVNT1..9 (9 events
Page 1352: at timer start-up.
Page 1353: RM0433                                                                                                                                   High-Resolution Timer (HRTIM)
Page 1353: the outputs. The number corresponds to the timer events (such as TIMEVNTx) listed in the
Page 1353: For instance, Timer A outputs can be set or reset by the following events: Timer B
Page 1353: Compare1, 2 and 4, Timer C Compare 2 and 3,... and Timer E Compare 3 will be listed as
Page 1353: Table 296. Events mapping across Timer A to E
Page 1353: Timer A                            Timer B                            Timer C                              Timer D                       Timer E
Page 1353: Timer
Page 1353: Timer
Page 1353: Timer
Page 1353: Timer
Page 1353: Timer
Page 1354: High-Resolution Timer (HRTIM)                                                                    RM0433
Page 1354: The timer has 2 capture registers: HRTIM_CPT1xR and HRTIM_CPT2xR. The capture
Page 1354: •   All other timing units (e.g. Timer B..E for timer A): Compare 1, 2 and output 1 set/reset
Page 1355: RM0433                                                                      High-Resolution Timer (HRTIM)
Page 1355: Timer B
Page 1355: Timer C
Page 1355: Timer D
Page 1355: Timer E            selection
Page 1355: Timer A Update
Page 1355: Timer A counter
Page 1355: this case, the compare match occurs independently from the timer counter value. It enables
Page 1356: High-Resolution Timer (HRTIM)                                                                                                  RM0433
Page 1357: RM0433                                                                                          High-Resolution Timer (HRTIM)
Page 1358: High-Resolution Timer (HRTIM)                                                                   RM0433
Page 1358: •    Once the timer has been reset
Page 1359: RM0433                                                                     High-Resolution Timer (HRTIM)
Page 1359: frequency) is defined by the timer’s period event, as shown on Figure 291. The push-pull
Page 1359: period is twice the timer counting period.
Page 1359: The push-pull mode is only available when the timer operates in continuous mode: the
Page 1359: disable the timer to stop a push-pull operation and to reset the counter before re-enabling it.
Page 1359: In the example given on Figure 292, the timer internal waveform is defined as follows:
Page 1360: High-Resolution Timer (HRTIM)                                                                        RM0433
Page 1361: RM0433                                                                High-Resolution Timer (HRTIM)
Page 1362: High-Resolution Timer (HRTIM)                                                                           RM0433
Page 1363: RM0433                                                                  High-Resolution Timer (HRTIM)
Page 1363: - When the timer is enabled (TxEN bit set)
Page 1363: - When the timer outputs are set/reset by another timer (while TxEN is reset)
Page 1363: It is therefore necessary to disable the timer (TxCEN bit reset) and have the corresponding
Page 1364: High-Resolution Timer (HRTIM)                                                                                  RM0433
Page 1364: 36.3.5         Master timer
Page 1364: The main purpose of the master timer is to provide common signals to the 5 timing units,
Page 1364: Figure 299 provides an overview of the master timer.
Page 1364: Figure 299. Master timer overview
Page 1364: CMP2       To Timer
Page 1364: The master timer is based on the very same architecture as the timing units, with the
Page 1364: The master timer control register includes all the timer enable bits, for the master and Timer
Page 1364: A..E timing units. This allows to have all timer synchronously started with a single write
Page 1364: It also handles the external synchronization for the whole HRTIM timer (see
Page 1364: Section 36.3.17: Synchronizing the HRTIM with other timers or HRTIM instances), with both
Page 1365: RM0433                                                               High-Resolution Timer (HRTIM)
Page 1365: Master timer control registers are mapped with the same offset as the timing units’ registers.
Page 1365: In case of multiple requests from adjacent timers (TIMEVNT1..9), the request which occurs
Page 1365: If multiple requests from the master timer occur within the same fHRTIM clock period, a
Page 1365: When multiple requests internal to the timer occur within the same fHRTIM clock period, a
Page 1365: •    A single source from the timer
Page 1366: High-Resolution Timer (HRTIM)                                                                      RM0433
Page 1366: The HRTIM timer can handle events not generated within the timer, referred to as “external
Page 1366: timer trigger outputs).
Page 1366: any of the 5 timers. This conditioning is common to all timers, since this is usually dictated
Page 1367: RM0433                                                                                     High-Resolution Timer (HRTIM)
Page 1367: Timer A..E                         Output
Page 1367: Timer A..E                            stage
Page 1367: Timer A..E                             stage
Page 1367: Timer A..E                             stage
Page 1367: Timer A..E                             stage
Page 1368: High-Resolution Timer (HRTIM)                                                                                        RM0433
Page 1368: event                            fault timer fault timer       Src1         Src 2             Src3                Src4
Page 1368: 1. OPAMP1_VOUT can be used as High-resolution timer internal event source. In this case, OPAMP1_VOUT (PC4) pin must
Page 1369: RM0433                                                                   High-Resolution Timer (HRTIM)
Page 1370: High-Resolution Timer (HRTIM)                                                                                                              RM0433
Page 1370: HRTIMER              1099    1100       1101    1102      1103          1104
Page 1370: HRTIMER
Page 1370: HRTIMER
Page 1370: HRTIMER
Page 1370: HRTIMER
Page 1371: RM0433                                                                   High-Resolution Timer (HRTIM)
Page 1371: HRTIM_EEFxR2 registers. Each of the 5 TimerA..E timing units has its own programmable
Page 1372: High-Resolution Timer (HRTIM)                                                                                    RM0433
Page 1372: •    the timer itself: the blanking lasts from the counter reset to the compare match
Page 1372: the 8 available options per timer: CMPx refers to blanking from counter reset to compare
Page 1372: and HRTIM_RSTx2 registers. For instance, Timer B (TIMFLTR6) is Timer C output 2
Page 1372: Timer A              Timer B           Timer C               Timer D            Timer E
Page 1372: Timer
Page 1372: Timer
Page 1372: Timer
Page 1372: Timer
Page 1372: Timer
Page 1373: RM0433                                                                             High-Resolution Timer (HRTIM)
Page 1374: High-Resolution Timer (HRTIM)                                                                          RM0433
Page 1374: given in Table 301. As an example, the external events in timer B can be filtered by a
Page 1374: window starting from timer A counter reset to timer A Compare 2.
Page 1374: Table 301. Windowing signals mapping per timer (EEFLTR[3:0] = 1111)
Page 1374: Destination               Timer A    Timer B          Timer C   Timer D   Timer E
Page 1374: Timer B     Timer A         Timer D   Timer C   Timer D
Page 1375: RM0433                                                                         High-Resolution Timer (HRTIM)
Page 1376: High-Resolution Timer (HRTIM)                                                                    RM0433
Page 1376: This mode is available whatever the timer operating mode (regular, push-pull, deadtime). It
Page 1376: •   hrtim_evt6 and hrtim_evt7 for Timer A, B and C
Page 1376: •   hrtim_evt8 and hrtim_evt9 for Timer D and E
Page 1377: RM0433                                                                            High-Resolution Timer (HRTIM)
Page 1378: High-Resolution Timer (HRTIM)                                                                               RM0433
Page 1379: RM0433                                                                           High-Resolution Timer (HRTIM)
Page 1379: •        hrtim_evt6 and hrtim_evt7 for Timer A, B and C
Page 1379: •        hrtim_evt8 and hrtim_evt9 for Timer D and E
Page 1380: High-Resolution Timer (HRTIM)                                                                           RM0433
Page 1381: RM0433                                                                High-Resolution Timer (HRTIM)
Page 1381: The timer operation is not interrupted (the counter continues to run).
Page 1381: –    timer operating in continuous mode (CONT = 1)
Page 1382: High-Resolution Timer (HRTIM)                                                                      RM0433
Page 1382: reset while the timer is running and preload was enabled, the content of the preload
Page 1382: Each timing unit and the master timer have their own PREEN bit. If PRREN is set, the
Page 1382: There are two options to initialize the timer when the preload feature is needed:
Page 1382: •    Enable PREEN bit at the very end of the timer initialization to have the preload
Page 1382: registers transferred into the active registers before the timer is enabled (by setting
Page 1383: RM0433                                                                High-Resolution Timer (HRTIM)
Page 1383: Timer       Preloadable registers     Preload enable            Update sources
Page 1383: Master Timer    HRTIM_MCMP1R                                 Burst DMA event
Page 1383: Timer x     HRTIM_TIMxCMP3R           PREEN bit in       Update event from other timers
Page 1383: TIMx or Master timer Update, depending on
Page 1383: Common      HRTIM_ADC3R               selected timer
Page 1383: The master timer has 4 update options:
Page 1384: High-Resolution Timer (HRTIM)                                                                 RM0433
Page 1384: Each timer (TIMA..E) can also have the update done as follows:
Page 1384: enabled when TxRSTU bit is set in HRTIM_TIMxCR. This is used for a timer operating
Page 1384: •   Update done synchronously with any other timer or master update (for instance TIMA
Page 1384: several timers, and is enabled by setting bits MSTU and TxU in HRTIM_TIMxCR
Page 1384: events coming from the general-purpose timers. These inputs are rising-edge sensitive.
Page 1384: several registers in multiple timers. The regular update event takes place once these bits
Page 1384: multiple timers (not necessarily synchronized) to be disabled and resumed simultaneously.
Page 1385: RM0433                                                                High-Resolution Timer (HRTIM)
Page 1385: timer repetition event. A second converter works in parallel with TIMA, TIMD and TIME, and
Page 1385: In HRTIM_MCR, MREPU bit is set: the update will occur at the end of the master timer
Page 1385: have TIMB and TIMC timers updated simultaneously with the master timer.
Page 1385: In HRTIM_TIMACR, TAREPU bit is set: the update will occur at the end of the Timer A
Page 1385: have TIMD and TIME timers updated simultaneously with Timer A.
Page 1385: registers will be done as soon as the Timer A repetition event occurs.
Page 1385: 36.3.11   Events propagation within or across multiple timers
Page 1385: timing units, including the master timer, to get full benefits from its modular architecture.
Page 1385: TIMx update triggered by the Master timer update
Page 1385: The sources listed in Table 304 are generating a master timer update. The table indicates if
Page 1386: High-Resolution Timer (HRTIM)                                                                          RM0433
Page 1386: Table 304. Master timer update event propagation
Page 1386: given event can be used to trigger a simultaneous update in another or multiple TIMx timers.
Page 1387: RM0433                                                                      High-Resolution Timer (HRTIM)
Page 1388: High-Resolution Timer (HRTIM)                                                                      RM0433
Page 1388: Table 307. Update event propagation for a timer reset
Page 1388: timer update                 MSWU = 1
Page 1389: RM0433                                                                     High-Resolution Timer (HRTIM)
Page 1389: Table 307. Update event propagation for a timer reset (continued)
Page 1389: Timer reset                                     No        lock-up situation (reset causing
Page 1390: High-Resolution Timer (HRTIM)                                                                                          RM0433
Page 1390: the level on the timer output that causes a power switch to be closed (or opened for an
Page 1391: RM0433                                                                 High-Resolution Timer (HRTIM)
Page 1391: crossbar output. If the timer clock is stopped, the level will either be inactive (after an HRTIM
Page 1391: reset) or correspond to the RUN level (when the timer was stopped and the output
Page 1392: High-Resolution Timer (HRTIM)                                                                                  RM0433
Page 1392: Table 309. Timer output programming for burst mode
Page 1393: RM0433                                                                High-Resolution Timer (HRTIM)
Page 1393: mode trigger, and the normal timer operation is resumed immediately after.
Page 1393: selected timer(s) are in an idle state (idle period). HRTIM_BMPER defines the overall burst
Page 1393: The counters of the timing units and the master timer can be stopped and reset during the
Page 1393: and TABM..TEBM for Timer A..E.
Page 1393: phase relationship with other timers in multiphase systems, for instance.
Page 1393: reset state during the burst idle period. This allows to have the timer restarting a full period
Page 1393: start or timer A start), a pulse is sent on the HRTIM_SCOUT output when exiting the burst
Page 1393: •    BMCLK[3:0] = 0000 to 0101: Master timer and TIMA..E reset/roll-over events. This
Page 1393: •    BMCLK[3:0] = 0110 to 1001: The clocking is provided by the general purpose timers,
Page 1394: High-Resolution Timer (HRTIM)                                                                        RM0433
Page 1394: Table 310. Burst mode clock sources from general purpose timer
Page 1394: •     6 Master timer events: repetition, reset/roll-over, Compare 1 to 4
Page 1394: •     5 x 4 events from timers A..E: repetition, reset/roll-over, Compare 1 and 2
Page 1394: •     Timer A period following hrtim_evt7 (including TIMA event filtering)
Page 1394: •     Timer D period following hrtim_evt8 (including TIMD event filtering)
Page 1394: •     On-chip events coming from other general purpose timer (hrtim_bm_trg
Page 1394: immediately or on the timer period following the event.
Page 1394: Trigger on timer      Output
Page 1395: RM0433                                                             High-Resolution Timer (HRTIM)
Page 1395: For TAEEV7 and TDEEV8 combined triggers (trigger on a Timer period following an
Page 1395: TDEEV8 bit set in the BMTRG register) in between the external event and the timer
Page 1396: High-Resolution Timer (HRTIM)                                                                        RM0433
Page 1396: (DTEN bit set in HRTIM_OUTxR), it is not possible to use the timerx output 2 as a filter for
Page 1397: RM0433                                                                                  High-Resolution Timer (HRTIM)
Page 1398: High-Resolution Timer (HRTIM)                                                                     RM0433
Page 1399: RM0433                                                               High-Resolution Timer (HRTIM)
Page 1399: The burst mode controller only controls one or a set of timers for a single converter. When
Page 1399: the burst mode is necessary for multiple independent timers, it is possible to emulate a
Page 1400: High-Resolution Timer (HRTIM)                                                                                          RM0433
Page 1401: RM0433                                                                       High-Resolution Timer (HRTIM)
Page 1401: The HRTIMER has a versatile fault protection circuitry to disable the outputs in case of an
Page 1402: High-Resolution Timer (HRTIM)                                                                                         RM0433
Page 1402: Timer x                                                                     CHx1
Page 1403: RM0433                                                                               High-Resolution Timer (HRTIM)
Page 1404: High-Resolution Timer (HRTIM)                                                                           RM0433
Page 1404: For each of the timers, the output state during a fault is defined with FAULT1[1:0] and
Page 1404: Timer A to E have auxiliary outputs in parallel with the regular outputs going to the output
Page 1405: RM0433                                                                          High-Resolution Timer (HRTIM)
Page 1406: High-Resolution Timer (HRTIM)                                                                                   RM0433
Page 1407: RM0433                                                                High-Resolution Timer (HRTIM)
Page 1407: 36.3.17   Synchronizing the HRTIM with other timers or HRTIM instances
Page 1407: This feature can also be used to synchronize the HRTIM with other timers, either external or
Page 1407: on-chip. The synchronization circuitry is controlled inside the master timer.
Page 1407: •    00: Master timer Start
Page 1407: This event is generated when MCEN bit is set or when the timer is re-started after
Page 1407: •    01: Master timer Compare 1 event
Page 1407: •    10: Timer A start
Page 1407: •    11: Timer A Compare 1 event
Page 1407: 3.   Master or Timer A counter enable (MCEN or TACEN bit set)
Page 1408: High-Resolution Timer (HRTIM)                                                                               RM0433
Page 1408: •       10: the on-chip TIM1 general purpose timer (TIM1 TRGO output)
Page 1408: This bitfield cannot be changed once the destination timer (master timer or timing unit) is
Page 1408: The HRTIM_SCIN input is rising-edge sensitive. The timer behavior is defined with the
Page 1408: •       Synchronous start: the incoming signal starts the timer’s counter (SYNCSTRTM and/or
Page 1408: SYNCSTRTx bits set). TxCEN (MCEN) bits must be set to have the timer enabled and
Page 1408: The effect of the synchronization event depends on the timer operating mode, as
Page 1408: Table 313. Effect of sync event vs timer operating modes
Page 1408: Reset events are starting the timer counting. They are taken into account
Page 1409: RM0433                                                                        High-Resolution Timer (HRTIM)
Page 1409: Table 313. Effect of sync event vs timer operating modes (continued)
Page 1409: reset from internal events and is starting or re-starting the timer counting.
Page 1409: The timer is enabled (MCEN or TxCEN bit set) and is waiting for the
Page 1409: reset from internal events and is starting or re-starting the timer counting.
Page 1410: High-Resolution Timer (HRTIM)                                                                    RM0433
Page 1411: RM0433                                                                                           High-Resolution Timer (HRTIM)
Page 1411: TimerA Cmp2..4 + PER + RST                                          TimerA Cmp2..4 + PER
Page 1411: TimerB Cmp2..4 + PER + RST                                          TimerB Cmp2..4 + PER
Page 1411: TimerC Cmp2..4 + PER                (Oring of same       TimerC Cmp2..4 + PER + RST            (Oring of same
Page 1411: TimerD Cmp2..4 + PER                                     TimerD Cmp2..4 + PER + RST
Page 1411: TimerE Cmp2..4 + PER                                          TimerE Cmp2..4 + RST           Trigger 2 Trigger 4
Page 1411: Timer A update
Page 1411: Timer B update
Page 1411: Timer C update
Page 1411: Timer D update
Page 1411: Timer E update
Page 1411: synchronously with the timer they are related to. The update source is defined with
Page 1411: For instance, if ADC trigger 1 outputs Timer A CMP2 events (HRTIM_ADC1R = 0x0000
Page 1411: 0400), HRTIM_ADC1R will be typically updated simultaneously with Timer A
Page 1411: When the preload is disabled (PREEN bit reset) in the source timer, the HRTIM_ADCxR
Page 1411: The HRTIMER allows to have the embedded DACs updated synchronously with the timer
Page 1411: The update events from the master timer and the timer units can generate DAC update
Page 1411: Note:     Each timer has its own DAC-related control register.
Page 1412: High-Resolution Timer (HRTIM)                                                                                        RM0433
Page 1412: When DACSYNC[1:0] bits are enabled in multiple timers, the hrtim_dac_trgx output will
Page 1412: consist of an OR of all timers’ update events. For instance, if DACSYNC = 1 in timer A and
Page 1412: in timer B, the update event in timer A will be ORed with the update event in timer B to
Page 1412: Timer A
Page 1412: Timer B
Page 1412: Timer A
Page 1412: Timer B
Page 1413: RM0433                                                                 High-Resolution Timer (HRTIM)
Page 1413: 7 interrupts can be generated by the master timer:
Page 1413: •   Master timer registers update
Page 1413: •   Master timer repetition event
Page 1413: •   hrtim_mst_it: Master timer interrupts (Master Update, Sync Input, Repetition,
Page 1414: High-Resolution Timer (HRTIM)                                                                       RM0433
Page 1414: Master timer registers update                     MUPD        MUPDIE          MUPDC
Page 1414: Master timer repetition event                     MREP        MREPIE          MREPC
Page 1415: RM0433                                                                    High-Resolution Timer (HRTIM)
Page 1415: both simultaneously. Each timer (master, TIMA...E) has its own DMA enable register.
Page 1415: •   1 channel for the master timer
Page 1415: Master timer registers update              Yes       MUPDDE
Page 1415: Master timer repetition event              Yes       MREPDE
Page 1415: (Master timer)
Page 1415: hrtim_dma2 (Timer A)       inactive to active)                        Yes       SETx2DE
Page 1415: hrtim_dma3 (Timer B)
Page 1415: hrtim_dma4 (Timer C)       Capture 1 and 2 events
Page 1415: hrtim_dma5 (Timer D)                                                  Yes       CPT2DE
Page 1415: hrtim_dma6 (Timer E)       Timing unit registers update               Yes       UPDDE
Page 1416: High-Resolution Timer (HRTIM)                                                                        RM0433
Page 1416: •    reprogram dynamically one or several timing units, for converters using multiple timer
Page 1416: The principle is to program which registers are to be written by DMA. The master timer and
Page 1417: RM0433                                                                                High-Resolution Timer (HRTIM)
Page 1418: High-Resolution Timer (HRTIM)                                                                                                   RM0433
Page 1418: synchronization with regular update events, with the timer counter. In this case, if a
Page 1418: Timer A
Page 1419: RM0433                                                                High-Resolution Timer (HRTIM)
Page 1419: put in IDLE mode with a low level. It is recommended to first disconnect the HRTIMER from
Page 1419: •    DBG_HRTIM_STOP = 1: all HRTIM timers, including the master, are stopped. The
Page 1419: Timer behavior during MCU halt when DBG_HRTIM_STOP = 1
Page 1420: High-Resolution Timer (HRTIM)                                                                    RM0433
Page 1421: RM0433                                                                 High-Resolution Timer (HRTIM)
Page 1421: Timers A..E provide either 10 buck converters coupled by pairs (both with identical switching
Page 1421: switching frequency), using the master timer as the 6th time base.
Page 1422: High-Resolution Timer (HRTIM)                                                                        RM0433
Page 1422: •   5 buck converters with synchronous rectification (SR), using the master timer and the 5
Page 1422: timers
Page 1422: •   4 buck converters (without SR), using the master timer and 2 timers
Page 1423: RM0433                                                              High-Resolution Timer (HRTIM)
Page 1423: The master timer is responsible for the phase management: it defines the phase
Page 1423: relationship between the converters by resetting the timers periodically. The phase-shift is
Page 1423: The duty cycle is then programmed into each of the timers. The outputs are defined as
Page 1423: •   HRTIM_CHA1 set on master timer period, reset on TACMP1
Page 1423: •   HRTIM_CHB1 set on master timer MCMP1, reset on TBCMP1
Page 1423: •   HRTIM_CHC1 set on master timer MCMP2, reset on TCCMP1
Page 1424: High-Resolution Timer (HRTIM)                                                                     RM0433
Page 1425: RM0433                                                                       High-Resolution Timer (HRTIM)
Page 1426: High-Resolution Timer (HRTIM)                                                                                    RM0433
Page 1426: 36.5.1          HRTIM Master Timer Control Register (HRTIM_MCR)
Page 1426: 10: Update done on master timer roll-over following a DMA burst transfer completion. This mode
Page 1426: Bit 29 MREPU: Master Timer Repetition update
Page 1426: This bit defines whether an update occurs when the master timer repetition period is completed
Page 1426: A DAC synchronization event can be enabled and generated when the master timer update occurs.
Page 1426: Bit 21 TECEN: Timer E counter enable
Page 1426: This bit starts the Timer E counter.
Page 1426: 0: Timer E counter disabled
Page 1426: 1: Timer E counter enabled
Page 1427: RM0433                                                                      High-Resolution Timer (HRTIM)
Page 1427: Bit 20 TDCEN: Timer D counter enable
Page 1427: This bit starts the Timer D counter.
Page 1427: 0: Timer D counter disabled
Page 1427: 1: Timer D counter enabled
Page 1427: Bit 19 TCCEN: Timer C counter enable
Page 1427: This bit starts the Timer C counter.
Page 1427: 0: Timer C counter disabled
Page 1427: 1: Timer C counter enabled
Page 1427: Bit 18 TBCEN: Timer B counter enable
Page 1427: This bit starts the Timer B counter.
Page 1427: 0: Timer B counter disabled
Page 1427: 1: Timer B counter enabled
Page 1427: Bit 17 TACEN: Timer A counter enable
Page 1427: This bit starts the Timer A counter.
Page 1427: 0: Timer A counter disabled
Page 1427: 1: Timer A counter enabled
Page 1427: Bit 16 MCEN: Master timer counter enable
Page 1427: This bit starts the Master timer counter.
Page 1427: 00: Master timer Start
Page 1427: 01: Master timer Compare 1 event
Page 1427: 10: Timer A start/reset
Page 1427: 11: Timer A Compare 1 event
Page 1427: This bit enables the Master timer start when receiving a synchronization input event:
Page 1427: 0: No effect on the Master timer
Page 1427: 1: A synchronization input event starts the Master timer
Page 1427: This bit enables the Master timer reset when receiving a synchronization input event:
Page 1427: 0: No effect on the Master timer
Page 1427: 1: A synchronization input event resets the Master timer
Page 1428: High-Resolution Timer (HRTIM)                                                                               RM0433
Page 1428: 10: Internal event: the HRTIM is synchronized with the on-chip timer (see Synchronization input).
Page 1428: Note: This parameter cannot be changed once the impacted timers are enabled.
Page 1428: This bit defines the behavior of the master timer counter in single-shot mode.
Page 1428: 0: The timer is not re-triggerable: a counter reset can be done only if the counter is stopped (period
Page 1428: 1: The timer is re-triggerable: a counter reset is done whatever the counter state (running or
Page 1428: 0: The timer operates in single-shot mode and stops when it reaches the MPER value
Page 1428: 1: The timer operates in continuous (free-running) mode and rolls over to zero when it reaches the
Page 1428: These bits define the master timer clock prescaler ratio.
Page 1428: The prescaling ratio cannot be modified once the timer is enabled.
Page 1429: RM0433                                                                          High-Resolution Timer (HRTIM)
Page 1429: 36.5.2          HRTIM Master Timer Interrupt Status Register (HRTIM_MISR)
Page 1429: This bit is set by hardware when the Master timer registers are updated.
Page 1429: This bit is set by hardware when the Master timer repetition period has elapsed.
Page 1429: This bit is set by hardware when the Master timer counter matches the value programmed in the
Page 1430: High-Resolution Timer (HRTIM)                                                                                 RM0433
Page 1430: 36.5.3          HRTIM Master Timer Interrupt Clear Register (HRTIM_MICR)
Page 1431: RM0433                                                                            High-Resolution Timer (HRTIM)
Page 1431: 36.5.4           HRTIM Master Timer DMA / Interrupt Enable Register
Page 1431: This bit is set and cleared by software to enable/disable the Master timer repetition DMA requests.
Page 1431: This bit is set and cleared by software to enable/disable the Master timer Compare 1 DMA requests.
Page 1431: This bit is set and cleared by software to enable/disable the Master timer registers update interrupts
Page 1432: High-Resolution Timer (HRTIM)                                                                             RM0433
Page 1432: This bit is set and cleared by software to enable/disable the Master timer repetition interrupts
Page 1432: This bit is set and cleared by software to enable/disable the Master timer Compare 1 interrupt
Page 1433: RM0433                                                                           High-Resolution Timer (HRTIM)
Page 1433: 36.5.5          HRTIM Master Timer Counter Register (HRTIM_MCNTR)
Page 1433: Holds the master timer counter value. This register can only be written when the master timer is
Page 1433: Note: The timer behavior is not guaranteed if the counter value is set above the HRTIM_MPER
Page 1433: 36.5.6          HRTIM Master Timer Period Register (HRTIM_MPER)
Page 1433: Bits 15:0 MPER[15:0]: Master Timer Period value
Page 1434: High-Resolution Timer (HRTIM)                                                                                      RM0433
Page 1434: 36.5.7            HRTIM Master Timer Repetition Register (HRTIM_MREP)
Page 1434: Bits 7:0 MREP[7:0]: Master Timer Repetition period value
Page 1434: 36.5.8            HRTIM Master Timer Compare 1 Register (HRTIM_MCMP1R)
Page 1434: Bits 15:0 MCMP1[15:0]: Master Timer Compare 1 value
Page 1434: This register holds the master timer Compare 1 value. It is either the preload register or the active
Page 1435: RM0433                                                                           High-Resolution Timer (HRTIM)
Page 1435: 36.5.9          HRTIM Master Timer Compare 2 Register (HRTIM_MCMP2R)
Page 1435: Bits 15:0 MCMP2[15:0]: Master Timer Compare 2 value
Page 1435: This register holds the master timer Compare 2 value. It is either the preload register or the active
Page 1435: 36.5.10         HRTIM Master Timer Compare 3 Register (HRTIM_MCMP3R)
Page 1435: Bits 15:0 MCMP3[15:0]: Master Timer Compare 3 value
Page 1435: This register holds the master timer Compare 3 value. It is either the preload register or the active
Page 1436: High-Resolution Timer (HRTIM)                                                                                 RM0433
Page 1436: 36.5.11        HRTIM Master Timer Compare 4 Register (HRTIM_MCMP4R)
Page 1436: Bits 15:0 MCMP4[15:0]: Master Timer Compare 4 value
Page 1436: This register holds the master timer Compare 4 value. It is either the preload register or the active
Page 1437: RM0433                                                                              High-Resolution Timer (HRTIM)
Page 1437: 36.5.12        HRTIM Timerx Control Register (HRTIM_TIMxCR)
Page 1437: Address offset: 0x0000h (this offset address is relative to timer x base address)
Page 1437: A DAC synchronization event is generated when the timer update occurs. These bits are defining on
Page 1438: High-Resolution Timer (HRTIM)                                                RM0433
Page 1438: Bit 24 MSTU: Master Timer update
Page 1438: Register update is triggered by the master timer update.
Page 1438: 0: Update by master timer disabled
Page 1438: 1: Update by master timer enabled
Page 1438: TEU: Timer E update
Page 1438: Register update is triggered by the timer E update
Page 1438: 0: Update by timer E disabled
Page 1438: 1: Update by timer E enabled
Page 1438: TDU: Timer D update
Page 1438: Register update is triggered by the timer D update
Page 1438: 0: Update by timer D disabled
Page 1438: 1: Update by timer D enabled
Page 1438: TCU: Timer C update
Page 1438: Register update is triggered by the timer C update
Page 1438: 0: Update by timer C disabled
Page 1438: 1: Update by timer C enabled
Page 1438: TBU: Timer B update
Page 1438: Register update is triggered by the timer B update
Page 1438: 0: Update by timer B disabled
Page 1438: 1: Update by timer B enabled
Page 1438: TAU: Timer A update
Page 1438: Register update is triggered by the timer A update
Page 1438: 0: Update by timer A disabled
Page 1438: 1: Update by timer A enabled
Page 1439: RM0433                                                                        High-Resolution Timer (HRTIM)
Page 1439: Bit 18 TxRSTU: Timerx reset update
Page 1439: Register update is triggered by Timerx counter reset or roll-over to 0 after reaching the period value
Page 1439: 0: Update by timer x reset / roll-over disabled
Page 1439: 1: Update by timer x reset / roll-over enabled
Page 1439: Bit 17 TxREPU: Timer x Repetition update
Page 1439: Bit 11 SYNCSTRTx: Synchronization Starts Timer x
Page 1439: This bit defines the Timer x behavior following the synchronization event:
Page 1439: 0: No effect on Timer x
Page 1439: 1: A synchronization input event starts the Timer x
Page 1439: Bit 10 SYNCRSTx: Synchronization Resets Timer x
Page 1439: This bit defines the Timer x behavior following the synchronization event:
Page 1439: 0: No effect on Timer x
Page 1439: 1: A synchronization input event resets the Timer x
Page 1440: High-Resolution Timer (HRTIM)                                                                                RM0433
Page 1440: 0: The timer is not re-triggerable: a counter reset is done if the counter is stopped (period elapsed in
Page 1440: 1: The timer is re-triggerable: a counter reset is done whatever the counter state.
Page 1440: This bit defines the timer operating mode.
Page 1440: 0: The timer operates in single-shot mode and stops when it reaches TIMxPER value
Page 1440: 1: The timer operates in continuous mode and rolls over to zero when it reaches TIMxPER value
Page 1440: Bits 2:0 CKPSCx[2:0]: HRTIM Timer x Clock prescaler
Page 1440: These bits define the master timer clock prescaler ratio.
Page 1440: The prescaling ratio cannot be modified once the timer is enabled.
Page 1441: RM0433                                                                                High-Resolution Timer (HRTIM)
Page 1441: 36.5.13          HRTIM Timerx Interrupt Status Register (HRTIM_TIMxISR)
Page 1441: Address offset: 0x0004h (this offset address is relative to timer x base address)
Page 1442: High-Resolution Timer (HRTIM)                                                                              RM0433
Page 1442: This bit is set by hardware when the timer x counter is reset or rolls over in continuous mode.
Page 1442: This bit is set by hardware when the timer x capture 1 event occurs.
Page 1442: 0: No timer x Capture 1 reset interrupt occurred
Page 1442: 1: Timer x output 1 reset interrupt occurred
Page 1442: This bit is set by hardware when the timer x update event occurs.
Page 1442: 0: No timer x update interrupt occurred
Page 1442: 1: Timer x update interrupt occurred
Page 1442: This bit is set by hardware when the timer x repetition period has elapsed.
Page 1442: 0: No timer x repetition interrupt occurred
Page 1442: 1: Timer x repetition interrupt occurred
Page 1442: This bit is set by hardware when the timer x counter matches the value programmed in the
Page 1443: RM0433                                                                               High-Resolution Timer (HRTIM)
Page 1443: 36.5.14          HRTIM Timerx Interrupt Clear Register (HRTIM_TIMxICR)
Page 1443: Address offset: 0x0008h (this offset address is relative to timer x base address)
Page 1444: High-Resolution Timer (HRTIM)                                                                                    RM0433
Page 1444: 36.5.15          HRTIM Timerx DMA / Interrupt Enable Register
Page 1444: Address offset: 0x000Ch (this offset address is relative to timer x base address)
Page 1444: This bit is set and cleared by software to enable/disable DMA requests on timer x counter reset or
Page 1444: 0: Timer x counter reset/roll-over DMA request disabled
Page 1444: 1: Timer x counter reset/roll-over DMA request enabled
Page 1445: RM0433                                                                        High-Resolution Timer (HRTIM)
Page 1445: This bit is set and cleared by software to enable/disable interrupts on timer x counter reset or roll-
Page 1445: 0: Timer x counter reset/roll-over interrupt disabled
Page 1445: 1: Timer x counter reset/roll-over interrupt enabled
Page 1446: High-Resolution Timer (HRTIM)                                                                         RM0433
Page 1447: RM0433                                                                             High-Resolution Timer (HRTIM)
Page 1447: 36.5.16        HRTIM Timerx Counter Register (HRTIM_CNTxR)
Page 1447: Address offset: 0x0010h (this offset address is relative to timer x base address)
Page 1447: Bits 15:0 CNTx[15:0]: Timerx Counter value
Page 1447: This register holds the Timerx counter value. It can only be written when the timer is stopped
Page 1447: Note: The timer behavior is not guaranteed if the counter value is above the HRTIM_PERxR register
Page 1447: 36.5.17        HRTIM Timerx Period Register (HRTIM_PERxR)
Page 1447: Address offset: 0x14h (this offset address is relative to timer x base address)
Page 1447: Bits 15:0 PERx[15:0]: Timerx Period value
Page 1447: This register holds timer x period value.
Page 1448: High-Resolution Timer (HRTIM)                                                                                       RM0433
Page 1448: 36.5.18           HRTIM Timerx Repetition Register (HRTIM_REPxR)
Page 1448: Address offset: 0x18h (this offset address is relative to timer x base address)
Page 1448: Bits 7:0 REPx[7:0]: Timerx Repetition period value
Page 1448: 36.5.19           HRTIM Timerx Compare 1 Register (HRTIM_CMP1xR)
Page 1448: Address offset: 0x1Ch (this offset address is relative to timer x base address)
Page 1448: Bits 15:0 CMP1x[15:0]: Timerx Compare 1 value
Page 1449: RM0433                                                                           High-Resolution Timer (HRTIM)
Page 1449: 36.5.20        HRTIM Timerx Compare 1 Compound Register
Page 1449: Address offset: 0x20h (this offset address is relative to timer x base address)
Page 1449: Bits 23:16 REPx[7:0]: Timerx Repetition value (aliased from HRTIM_REPx register)
Page 1449: Bits 15:0 CMP1x[15:0]: Timerx Compare 1 value
Page 1449: 36.5.21        HRTIM Timerx Compare 2 Register (HRTIM_CMP2xR)
Page 1449: Address offset: 0x24h (this offset address is relative to timer x base address)
Page 1449: Bits 15:0 CMP2x[15:0]: Timerx Compare 2 value
Page 1450: High-Resolution Timer (HRTIM)                                                                                    RM0433
Page 1450: 36.5.22        HRTIM Timerx Compare 3 Register (HRTIM_CMP3xR)
Page 1450: Address offset: 0x28h (this offset address is relative to timer x base address)
Page 1450: Bits 15:0 CMP3x[15:0]: Timerx Compare 3 value
Page 1450: 36.5.23        HRTIM Timerx Compare 4 Register (HRTIM_CMP4xR)
Page 1450: Address offset: 0x2Ch (this offset address is relative to timer x base address)
Page 1450: Bits 15:0 CMP4x[15:0]: Timerx Compare 4 value
Page 1451: RM0433                                                                           High-Resolution Timer (HRTIM)
Page 1451: 36.5.24        HRTIM Timerx Capture 1 Register (HRTIM_CPT1xR)
Page 1451: Address offset: 0x30h (this offset address is relative to timer x base address)
Page 1451: Bits 15:0 CPT1x[15:0]: Timerx Capture 1 value
Page 1451: 36.5.25        HRTIM Timerx Capture 2 Register (HRTIM_CPT2xR)
Page 1451: Address offset: 0x34h (this offset address is relative to timer x base address)
Page 1451: Bits 15:0 CPT2x[15:0]: Timerx Capture 2 value
Page 1452: High-Resolution Timer (HRTIM)                                                                                   RM0433
Page 1452: 36.5.26        HRTIM Timerx Deadtime Register (HRTIM_DTxR)
Page 1452: Address offset: 0x38h (this offset address is relative to timer x base address)
Page 1453: RM0433                                                                      High-Resolution Timer (HRTIM)
Page 1454: High-Resolution Timer (HRTIM)                                                                                RM0433
Page 1454: 36.5.27       HRTIM Timerx Output1 Set Register (HRTIM_SETx1R)
Page 1454: Address offset: 0x3Ch (this offset address is relative to timer x base address)
Page 1454: Bit 20 TIMEVNT9: Timer Event 9
Page 1454: Bit 19 TIMEVNT8: Timer Event 8
Page 1454: Bit 18 TIMEVNT7: Timer Event 7
Page 1454: Bit 17 TIMEVNT6: Timer Event 6
Page 1455: RM0433                                                                         High-Resolution Timer (HRTIM)
Page 1455: Bit 16 TIMEVNT5: Timer Event 5
Page 1455: Bit 15 TIMEVNT4: Timer Event 4
Page 1455: Bit 14 TIMEVNT3: Timer Event 3
Page 1455: Bit 13 TIMEVNT2: Timer Event 2
Page 1455: Bit 12 TIMEVNT1:Timer Event 1
Page 1455: Timers event 1 forces the output to its active state (refer to Table 296 for Timer Events assignments)
Page 1455: Master Timer Compare 4 event forces the output to its active state.
Page 1455: Master Timer Compare 3 event forces the output to its active state.
Page 1455: Master Timer Compare 2 event forces the output to its active state.
Page 1455: Master Timer compare 1 event forces the output to its active state.
Page 1455: The master timer counter roll-over in continuous mode, or to the master timer reset in single-shot
Page 1455: Bit 6 CMP4: Timer x Compare 4
Page 1455: Timer A compare 4 event forces the output to its active state.
Page 1455: Bit 5 CMP3: Timer x Compare 3
Page 1455: Timer A compare 3 event forces the output to its active state.
Page 1455: Bit 4 CMP2: Timer x Compare 2
Page 1455: Timer A compare 2 event forces the output to its active state.
Page 1455: Bit 3 CMP1: Timer x Compare 1
Page 1455: Timer A compare 1 event forces the output to its active state.
Page 1455: Bit 2 PER: Timer x Period
Page 1455: Timer A Period event forces the output to its active state.
Page 1455: Bit 1 RESYNC: Timer A resynchronization
Page 1455: Timer A reset event coming solely from software or SYNC input forces the output to its active state.
Page 1455: Note: Other timer reset are not affecting the output when RESYNC=1
Page 1456: High-Resolution Timer (HRTIM)                                                                                  RM0433
Page 1456: 36.5.28       HRTIM Timerx Output1 Reset Register (HRTIM_RSTx1R)
Page 1456: Address offset: 0x40h (this offset address is relative to timer x base address)
Page 1456: 36.5.29       HRTIM Timerx Output2 Set Register (HRTIM_SETx2R)
Page 1456: Address offset: 0x44h (this offset address is relative to timer x base address)
Page 1457: RM0433                                                                          High-Resolution Timer (HRTIM)
Page 1457: 36.5.30       HRTIM Timerx Output2 Reset Register (HRTIM_RSTx2R)
Page 1457: Address offset: 0x48h (this offset address is relative to timer x base address)
Page 1458: High-Resolution Timer (HRTIM)                                                                                      RM0433
Page 1458: 36.5.31           HRTIM Timerx External Event Filtering Register 1
Page 1458: Address offset: 0x4Ch (this offset address is relative to timer x base address)
Page 1459: RM0433                                                                       High-Resolution Timer (HRTIM)
Page 1460: High-Resolution Timer (HRTIM)                                                                                       RM0433
Page 1460: 36.5.32           HRTIM Timerx External Event Filtering Register 2
Page 1460: Address offset: 0x50h (this offset address is relative to timer x base address)
Page 1461: RM0433                                                                             High-Resolution Timer (HRTIM)
Page 1461: 36.5.33         HRTIM Timerx Reset Register (HRTIM_RSTxR)
Page 1461: HRTIM TimerA Reset Register (HRTIM_RSTAR)
Page 1461: Bit 30 TECPM4: Timer E Compare 4
Page 1461: The timer A counter is reset upon timer E Compare 4 event.
Page 1461: Bit 29 TECMP2: Timer E Compare 2
Page 1461: The timer A counter is reset upon timer E Compare 2 event.
Page 1461: Bit 28 TECMP1: Timer E Compare 1
Page 1461: The timer A counter is reset upon timer E Compare 1 event.
Page 1461: Bit 27 TDCMP4: Timer D Compare 4
Page 1461: The timer A counter is reset upon timer D Compare 4 event.
Page 1461: Bit 26 TDCMP2: Timer D Compare 2
Page 1461: The timer A counter is reset upon timer D Compare 2 event.
Page 1461: Bit 25 TDCMP1: Timer D Compare 1
Page 1461: The timer A counter is reset upon timer D Compare 1 event.
Page 1461: Bit 24 TCCMP4: Timer C Compare 4
Page 1461: The timer A counter is reset upon timer C Compare 4 event.
Page 1461: Bit 23 TCCMP2: Timer C Compare 2
Page 1461: The timer A counter is reset upon timer C Compare 2 event.
Page 1461: Bit 22 TCCMP1: Timer C Compare 1
Page 1461: The timer A counter is reset upon timer C Compare 1 event.
Page 1461: Bit 21 TBCMP4: Timer B Compare 4
Page 1461: The timer A counter is reset upon timer B Compare 4 event.
Page 1461: Bit 20 TBCMP2: Timer B Compare 2
Page 1461: The timer A counter is reset upon timer B Compare 2 event.
Page 1461: Bit 19 TBCMP1: Timer B Compare 1
Page 1461: The timer A counter is reset upon timer B Compare 1 event.
Page 1461: The timer A counter is reset upon external event 10.
Page 1461: The timer A counter is reset upon external event 9.
Page 1462: High-Resolution Timer (HRTIM)                                                  RM0433
Page 1462: The timer A counter is reset upon external event 8.
Page 1462: The timer A counter is reset upon external event 7.
Page 1462: The timer A counter is reset upon external event 6.
Page 1462: The timer A counter is reset upon external event 5.
Page 1462: The timer A counter is reset upon external event 4.
Page 1462: The timer A counter is reset upon external event 3.
Page 1462: The timer A counter is reset upon external event 2.
Page 1462: The timer A counter is reset upon external event 1.
Page 1462: The timer A counter is reset upon master timer Compare 4 event.
Page 1462: The timer A counter is reset upon master timer Compare 3 event.
Page 1462: The timer A counter is reset upon master timer Compare 2 event.
Page 1462: The timer A counter is reset upon master timer Compare 1 event.
Page 1462: Bit 4 MSTPER Master timer Period
Page 1462: The timer A counter is reset upon master timer period event.
Page 1462: Bit 3 CMP4: Timer A compare 4 reset
Page 1462: The timer A counter is reset upon Timer A Compare 4 event.
Page 1462: Bit 2 CMP2: Timer A compare 2 reset
Page 1462: The timer A counter is reset upon Timer A Compare 2 event.
Page 1462: Bit 1 UPDT: Timer A Update reset
Page 1462: The timer A counter is reset upon update event.
Page 1463: RM0433                                                                          High-Resolution Timer (HRTIM)
Page 1463: HRTIM TimerB Reset Register (HRTIM_RSTBR)
Page 1463: HRTIM TimerC Reset Register (HRTIM_RSTCR)
Page 1463: HRTIM TimerD Reset Register (HRTIM_RSTDR)
Page 1464: High-Resolution Timer (HRTIM)                                                                                     RM0433
Page 1464: HRTIM Timerx Reset Register (HRTIM_RSTER)
Page 1464: 36.5.34        HRTIM Timerx Chopper Register (HRTIM_CHPxR)
Page 1464: Address offset: 0x58h (this offset address is relative to timer x base address)
Page 1465: RM0433                                                                         High-Resolution Timer (HRTIM)
Page 1465: Bits 10:7 STRPW[3:0]: Timerx start pulsewidth
Page 1465: Bits 6:4 CARDTY[2:0]: Timerx chopper duty cycle value
Page 1465: Bits 3:0 CARFRQ[3:0]: Timerx carrier frequency value
Page 1466: High-Resolution Timer (HRTIM)                                                                                                               RM0433
Page 1466: 36.5.35           HRTIM Timerx Capture 1 Control Register (HRTIM_CPT1xCR)
Page 1466: Address offset: 0x5Ch (this offset address is relative to timer x base address)
Page 1467: RM0433                                                                                                High-Resolution Timer (HRTIM)
Page 1467: 36.5.36          HRTIM Timerx Capture 2 Control Register (HRTIM_CPT2xCR)
Page 1467: Address offset: 0x60h (this offset address is relative to timer x base address)
Page 1467: Bit 31 TECMP2: Timer E Compare 2
Page 1467: Note: This bit is reserved for Timer E
Page 1467: Bit 30 TECMP1: Timer E Compare 1
Page 1467: Note: This bit is reserved for Timer E
Page 1467: Bit 29 TE1RST: Timer E output 1 Reset
Page 1467: Note: This bit is reserved for Timer E
Page 1467: Bit 28 TE1SET: Timer E output 1 Set
Page 1467: Note: This bit is reserved for Timer E
Page 1467: Bit 27 TDCMP2: Timer D Compare 2
Page 1467: Note: This bit is reserved for Timer D
Page 1467: Bit 26 TDCMP1:Timer D Compare 1
Page 1467: Note: This bit is reserved for Timer D
Page 1467: Bit 25 TD1RST: Timer D output 1 Reset
Page 1467: Note: This bit is reserved for Timer D
Page 1467: Bit 24 TD1SET: Timer D output 1 Set
Page 1467: Note: This bit is reserved for Timer D
Page 1467: Bit 23 TCCMP2: Timer C Compare 2
Page 1467: Note: This bit is reserved for Timer C
Page 1468: High-Resolution Timer (HRTIM)                                                              RM0433
Page 1468: Bit 22 TCCMP1:Timer C Compare 1
Page 1468: Note: This bit is reserved for Timer C
Page 1468: Bit 21 TC1RST: Timer C output 1 Reset
Page 1468: Note: This bit is reserved for Timer C
Page 1468: Bit 20 TC1SET: Timer C output 1 Set
Page 1468: Note: This bit is reserved for Timer C
Page 1468: Bit 19 TBCMP2: Timer B Compare 2
Page 1468: Note: This bit is reserved for Timer B
Page 1468: Bit 18 TBCMP1: Timer B Compare 1
Page 1468: Note: This bit is reserved for Timer B
Page 1468: Bit 17 TB1RST: Timer B output 1 Reset
Page 1468: Note: This bit is reserved for Timer B
Page 1468: Bit 16 TB1SET: Timer B output 1 Set
Page 1468: Note: This bit is reserved for Timer B
Page 1468: Bit 15 TACMP2: Timer A Compare 2
Page 1468: Timer A Compare 2 triggers Capture 2.
Page 1468: Note: This bit is reserved for Timer A
Page 1468: Bit 14 TACMP1: Timer A Compare 1
Page 1468: Timer A Compare 1 triggers Capture 2.
Page 1468: Note: This bit is reserved for Timer A
Page 1468: Bit 13 TA1RST: Timer B output 1 Reset
Page 1468: Note: This bit is reserved for Timer A
Page 1468: Bit 12 TA1SET: Timer B output 1 Set
Page 1468: Note: This bit is reserved for Timer A
Page 1469: RM0433                                                                      High-Resolution Timer (HRTIM)
Page 1470: High-Resolution Timer (HRTIM)                                                                                             RM0433
Page 1470: 36.5.37          HRTIM Timerx Output Register (HRTIM_OUTxR)
Page 1470: Address offset: 0x64h (this offset address is relative to timer x base address)
Page 1470: Note: This parameter cannot be changed once the timer x is enabled.
Page 1470: Note: This parameter cannot be changed once the timer x is enabled.
Page 1470: Note: This parameter cannot be changed once the timer x is enabled (TxCEN bit set), if FLTENx bit is
Page 1471: RM0433                                                                         High-Resolution Timer (HRTIM)
Page 1471: Note: This parameter cannot be changed once the timer x is enabled.
Page 1471: Note: This parameter cannot be changed once the timer x is enabled (TxEN bit set).
Page 1471: Note: This parameter cannot be changed once the timer is operating (TxEN bit set) or if its outputs
Page 1471: are enabled and set/reset by another timer.
Page 1471: Note: This parameter cannot be changed once the timer x is enabled.
Page 1472: High-Resolution Timer (HRTIM)                                                                           RM0433
Page 1472: Note: This parameter cannot be changed once the timer x is enabled.
Page 1472: Note: This parameter cannot be changed once the timer x is enabled (TxCEN bit set), if FLTENx bit is
Page 1472: Note: This parameter cannot be changed once the timer x is enabled.
Page 1473: RM0433                                                                              High-Resolution Timer (HRTIM)
Page 1473: 36.5.38          HRTIM Timerx Fault Register (HRTIM_FLTxR)
Page 1473: Address offset: 0x68h (this offset address is relative to timer x base address)
Page 1474: High-Resolution Timer (HRTIM)                                                                                                RM0433
Page 1474: from preload to active register). It only defines the source timer. The precise condition is defined
Page 1474: within the timer itself, in HRTIM_MCR or HRTIM_TIMxCR.
Page 1474: 000: Master Timer
Page 1474: 001: Timer A
Page 1474: 010: Timer B
Page 1474: 011: Timer C
Page 1474: 100: Timer D
Page 1474: 101: Timer E
Page 1474: Bit 5 TEUDIS: Timer E Update Disable
Page 1474: Bit 4 TDUDIS: Timer D Update Disable
Page 1474: Bit 3 TCUDIS: Timer C Update Disable
Page 1475: RM0433                                                                    High-Resolution Timer (HRTIM)
Page 1475: Bit 2 TBUDIS: Timer B Update Disable
Page 1475: Bit 1 TAUDIS: Timer A Update Disable
Page 1475: Timer A.
Page 1476: High-Resolution Timer (HRTIM)                                                                                  RM0433
Page 1476: Bit 13 TERST: Timer E counter software reset
Page 1476: Bit 12 TDRST: Timer D counter software reset
Page 1476: Bit 11 TCRST: Timer C counter software reset
Page 1476: Bit 10 TBRST: Timer B counter software reset
Page 1476: Bit 9 TARST: Timer A counter software reset
Page 1476: Setting this bit resets the TimerA counter.
Page 1476: Setting this bit resets the Master timer counter.
Page 1476: Bit 5 TESWU: Timer E Software Update
Page 1476: Bit 4 TDSWU: Timer D Software Update
Page 1476: Bit 3 TCSWU: Timer C Software Update
Page 1476: Bit 2 TBSWU: Timer B Software Update
Page 1476: Bit 1 TASWU: Timer A Software update
Page 1476: Bit 0 MSWU: Master Timer Software update
Page 1476: the preload to the active register in the master timer and any pending update request is cancelled.
Page 1477: RM0433                                                                               High-Resolution Timer (HRTIM)
Page 1478: High-Resolution Timer (HRTIM)                                                                                     RM0433
Page 1479: RM0433                                                                             High-Resolution Timer (HRTIM)
Page 1480: High-Resolution Timer (HRTIM)                                                                                 RM0433
Page 1480: Bit 9 TE2OEN: Timer E Output 2 Enable
Page 1480: Bit 8 TE1OEN: Timer E Output 1 Enable
Page 1480: Bit 7 TD2OEN: Timer D Output 2 Enable
Page 1480: Bit 6 TD1OEN: Timer D Output 1 Enable
Page 1480: Bit 5 TC2OEN: Timer C Output 2 Enable
Page 1480: Bit 4 TC1OEN: Timer C Output 1 Enable
Page 1480: Bit 3 TB2OEN: Timer B Output 2 Enable
Page 1480: Bit 2 TB1OEN: Timer B Output 1 Enable
Page 1480: Bit 1 TA2OEN: Timer A Output 2 Enable
Page 1480: Bit 0 TA1OEN: Timer A Output 1 (HRTIM_CHA1) Enable
Page 1480: Setting this bit enables the Timer A output 1. Writing “0” has no effect.
Page 1480: This bit is cleared asynchronously by hardware as soon as the timer-related fault input(s) is (are)
Page 1481: RM0433                                                                              High-Resolution Timer (HRTIM)
Page 1481: Bit 9 TE2ODIS: Timer E Output 2 disable
Page 1481: Bit 8 TE1ODIS: Timer E Output 1 disable
Page 1481: Bit 7 TD2ODIS: Timer D Output 2 disable
Page 1481: Bit 6 TD1ODIS: Timer D Output 1 disable
Page 1481: Bit 5 TC2ODIS: Timer C Output 2 disable
Page 1481: Bit 4 TC1ODIS: Timer C Output 1 disable
Page 1481: Bit 3 TB2ODIS: Timer B Output 2 disable
Page 1481: Bit 2 TB1ODIS: Timer B Output 1 disable
Page 1481: Bit 1 TA2ODIS: Timer A Output 2 disable
Page 1481: Bit 0 TA1ODIS: Timer A Output 1 (HRTIM_CHA1) disable
Page 1481: Setting this bit disables the Timer A output 1. The output enters the idle state, either from the run
Page 1482: High-Resolution Timer (HRTIM)                                                                                     RM0433
Page 1482: Bit 9 TE2ODS: Timer E Output 2 disable status
Page 1482: Bit 8 TE1ODS: Timer E Output 1 disable status
Page 1482: Bit 7 TD2ODS: Timer D Output 2 disable status
Page 1482: Bit 6 TD1ODS: Timer D Output 1 disable status
Page 1482: Bit 5 TC2ODS: Timer C Output 2 disable status
Page 1482: Bit 4 TC1ODS: Timer C Output 1 disable status
Page 1482: Bit 3 TB2ODS: Timer B Output 2 disable status
Page 1482: Bit 2 TB1ODS: Timer B Output 1 disable status
Page 1482: Bit 1 TA2ODS: Timer A Output 2 disable status
Page 1482: Bit 0 TA1ODS: Timer A Output 1 disable status
Page 1483: RM0433                                                                              High-Resolution Timer (HRTIM)
Page 1483: Bit 21 TEBM: Timer E Burst Mode
Page 1483: Bit 20 TDBM: Timer D Burst Mode
Page 1483: Bit 19 TCBM: Timer C Burst Mode
Page 1483: Bit 18 TBBM: Timer B Burst Mode
Page 1483: Bit 17 TABM: Timer A Burst Mode
Page 1483: This bit defines how the timer behaves during a burst mode operation. This bitfield cannot be
Page 1483: 0: Timer A counter clock is maintained and the timer operates normally
Page 1483: 1: Timer A counter clock is stopped and the counter is reset
Page 1483: Bit 16 MTBM: Master Timer Burst Mode
Page 1483: This bit defines how the timer behaves during a burst mode operation. This bitfield cannot be
Page 1483: 0: Master Timer counter clock is maintained and the timer operates normally
Page 1483: 1: Master Timer counter clock is stopped and the counter is reset
Page 1484: High-Resolution Timer (HRTIM)                                                                               RM0433
Page 1484: 0000: Master timer counter reset/roll-over
Page 1484: 0001: Timer A counter reset/roll-over
Page 1484: 0010: Timer B counter reset/roll-over
Page 1484: 0011: Timer C counter reset/roll-over
Page 1484: 0100: Timer D counter reset/roll-over
Page 1484: 0101: Timer E counter reset/roll-over
Page 1485: RM0433                                                                             High-Resolution Timer (HRTIM)
Page 1485: Bit 28 TDEEV8: Timer D period following External Event 8
Page 1485: The timer D period following an external event 8 (conditioned by TIMD filters) is starting the burst
Page 1485: Bit 27 TAEEV7: Timer A period following External Event 7
Page 1485: The timer A period following an external event 7 (conditioned by TIMA filters) is starting the burst
Page 1485: Bit 26 TECMP2: Timer E Compare 2 event
Page 1485: Bit 25 TECMP1: Timer E Compare 1 event
Page 1485: Bit 24 TEREP: Timer E repetition
Page 1485: Bit 23 TERST: Timer E counter reset or roll-over
Page 1485: Bit 22 TDCMP2: Timer D Compare 2 event
Page 1485: Bit 21 TDCMP1: Timer D Compare 1 event
Page 1485: Bit 20 TDREP: Timer D repetition
Page 1485: Bit 19 TDRST: Timer D reset or roll-over
Page 1485: Bit 18 TCCMP2: Timer C Compare 2 event
Page 1486: High-Resolution Timer (HRTIM)                                                                   RM0433
Page 1486: Bit 17 TCCMP1: Timer C Compare 1 event
Page 1486: Bit 16 TCREP: Timer C repetition
Page 1486: Bit 15 TCRST: Timer C reset or roll-over
Page 1486: Bit 14 TBCMP2: Timer B Compare 2 event
Page 1486: Bit 13 TBCMP1: Timer B Compare 1 event
Page 1486: Bit 12 TBREP: Timer B repetition
Page 1486: Bit 11 TBRST: Timer B reset or roll-over
Page 1486: Bit 10 TACMP2: Timer A Compare 2 event
Page 1486: Bit 9 TACMP1: Timer A Compare 1 event
Page 1486: The timer A compare 1 event is starting the burst mode operation.
Page 1486: Bit 8 TAREP: Timer A repetition
Page 1486: The Timer A repetition event is starting the burst mode operation.
Page 1486: Bit 7 TARST: Timer A reset or roll-over
Page 1486: The Timer A reset or roll-over event is starting the burst mode operation.
Page 1486: The master timer Compare 1 event is starting the burst mode operation.
Page 1486: The master timer repetition event is starting the burst mode operation.
Page 1486: The master timer reset and roll-over event is starting the burst mode operation.
Page 1487: RM0433                                                                             High-Resolution Timer (HRTIM)
Page 1487: Defines the number of periods during which the selected timers are in idle state.
Page 1488: High-Resolution Timer (HRTIM)                                                                                      RM0433
Page 1488: 36.5.51          HRTIM Timer External Event Control Register 1 (HRTIM_EECR1)
Page 1489: RM0433                                                                     High-Resolution Timer (HRTIM)
Page 1489: Note: This parameter cannot be changed once the timer x is enabled. It must be configured prior to
Page 1489: Note: This parameter cannot be changed once the timer x is enabled. It must be configured prior to
Page 1490: High-Resolution Timer (HRTIM)                                                                                   RM0433
Page 1490: 36.5.52          HRTIM Timer External Event Control Register 2 (HRTIM_EECR2)
Page 1491: RM0433                                                                           High-Resolution Timer (HRTIM)
Page 1491: 36.5.53         HRTIM Timer External Event Control Register 3 (HRTIM_EECR3)
Page 1491: This bitfield indicates the division ratio between the timer clock frequency (fHRTIM) and the
Page 1492: High-Resolution Timer (HRTIM)                                                                                    RM0433
Page 1493: RM0433                                                                         High-Resolution Timer (HRTIM)
Page 1494: High-Resolution Timer (HRTIM)                                                                       RM0433
Page 1494: Bit 31 ADC3TEPER: ADC trigger 3 on Timer E Period
Page 1494: Bit 30 ADC3TEC4: ADC trigger 3 on Timer E Compare 4
Page 1494: Bit 29 ADC3TEC3: ADC trigger 3 on Timer E Compare 3
Page 1494: Bit 28 ADC3TEC2: ADC trigger 3 on Timer E Compare 2
Page 1494: Bit 27 ADC3TDPER: ADC trigger 3 on Timer D Period
Page 1494: Bit 26 ADC3TDC4: ADC trigger 3 on Timer D Compare 4
Page 1494: Bit 25 ADC3TDC3: ADC trigger 3 on Timer D Compare 3
Page 1494: Bit 24 ADC3TDC2: ADC trigger 3 on Timer D Compare 2
Page 1494: Bit 23 ADC3TCPER: ADC trigger 3 on Timer C Period
Page 1494: Bit 22 ADC3TCC4: ADC trigger 3 on Timer C Compare 4
Page 1494: Bit 21 ADC3TCC3: ADC trigger 3 on Timer C Compare 3
Page 1494: Bit 20 ADC3TCC2: ADC trigger 3 on Timer C Compare 2
Page 1494: Bit 19 ADC3TBRST: ADC trigger 3 on Timer B Reset and counter roll-over
Page 1494: Bit 18 ADC3TBPER: ADC trigger 3 on Timer B Period
Page 1494: Bit 17 ADC3TBC4: ADC trigger 3 on Timer B Compare 4
Page 1495: RM0433                                                                    High-Resolution Timer (HRTIM)
Page 1495: Bit 16 ADC3TBC3: ADC trigger 3 on Timer B Compare 3
Page 1495: Bit 15 ADC3TBC2: ADC trigger 3 on Timer B Compare 2
Page 1495: Bit 14 ADC3TARST: ADC trigger 3 on Timer A Reset and counter roll-over
Page 1495: This bit enables the generation of an ADC Trigger upon Timer A reset and roll-over event, on ADC
Page 1495: Bit 13 ADC3TAPER: ADC trigger 3 on Timer A Period
Page 1495: This bit enables the generation of an ADC Trigger upon Timer A period event, on ADC Trigger 3
Page 1495: Bit 12 ADC3TAC4: ADC trigger 3 on Timer A Compare 4
Page 1495: Bit 11 ADC3TAC3: ADC trigger 3 on Timer A Compare 3
Page 1495: Bit 10 ADC3TAC2: ADC trigger 3 on Timer A Compare 2
Page 1495: This bit enables the generation of an ADC Trigger upon Timer A Compare 2 event, on ADC Trigger 3
Page 1495: This bit enables the generation of an ADC Trigger upon Master timer period event, on ADC Trigger 3
Page 1496: High-Resolution Timer (HRTIM)                                                                             RM0433
Page 1496: Bit 31 ADC4TERST: ADC trigger 4 on Timer E Reset and counter roll-over (1)
Page 1496: Bit 30 ADC4TEC4: ADC trigger 4 on Timer E Compare 4
Page 1496: Bit 29 ADC4TEC3: ADC trigger 4 on Timer E Compare 3
Page 1496: Bit 28 ADC4TEC2: ADC trigger 4 on Timer E Compare 2
Page 1496: Bit 27 ADC4TDRST: ADC trigger 4 on Timer D Reset and counter roll-over (1)
Page 1496: Bit 26 ADC4TDPER: ADC trigger 4 on Timer D Period
Page 1496: Bit 25 ADC4TDC4: ADC trigger 4 on Timer D Compare 4
Page 1496: Bit 24 ADC4TDC3: ADC trigger 4 on Timer D Compare 3
Page 1496: Bit 23 ADC4TDC2: ADC trigger 2 on Timer D Compare 2
Page 1496: Bit 22 ADC4TCRST: ADC trigger 4 on Timer C Reset and counter roll-over (1)
Page 1496: This bit enables the generation of an ADC Trigger upon Timer C reset and roll-over event, on ADC
Page 1496: Bit 21 ADC4TCPER: ADC trigger 4 on Timer C Period
Page 1496: Bit 20 ADC4TCC4: ADC trigger 4 on Timer C Compare 4
Page 1496: Bit 19 ADC4TCC3: ADC trigger 4 on Timer C Compare 3
Page 1496: Bit 18 ADC4TCC2: ADC trigger 4 on Timer C Compare 2
Page 1497: RM0433                                                                      High-Resolution Timer (HRTIM)
Page 1497: Bit 17 ADC4TBPER: ADC trigger 4 on Timer B Period
Page 1497: Bit 16 ADC4TBC4: ADC trigger 4 on Timer B Compare 4
Page 1497: Bit 15 ADC4TBC3: ADC trigger 4 on Timer B Compare 3
Page 1497: Bit 14 ADC4TBC2: ADC trigger 4 on Timer B Compare 2
Page 1497: Bit 13 ADC4TAPER: ADC trigger 4 on Timer A Period
Page 1497: This bit enables the generation of an ADC Trigger upon Timer A event, on ADC Trigger 4 output
Page 1497: Bit 12 ADC4TAC4: ADC trigger 4 on Timer A Compare 4
Page 1497: Bit 11 ADC4TAC3: ADC trigger 4 on Timer A Compare 3
Page 1497: Bit 10 ADC4TAC2: ADC trigger 4 on Timer A Compare 2
Page 1497: This bit enables the generation of an ADC Trigger upon Timer A Compare 2, on ADC Trigger 4
Page 1498: High-Resolution Timer (HRTIM)                                                                             RM0433
Page 1499: RM0433                                                                    High-Resolution Timer (HRTIM)
Page 1500: High-Resolution Timer (HRTIM)                                                                                   RM0433
Page 1500: This bitfield indicates the division ratio between the timer clock frequency (fHRTIM) and the
Page 1501: RM0433                                                                         High-Resolution Timer (HRTIM)
Page 1502: High-Resolution Timer (HRTIM)                                                                                    RM0433
Page 1502: 36.5.60         HRTIM Burst DMA Master timer update Register
Page 1502: This bit defines if the master timer MCR register is part of the list of registers to be updated by the
Page 1503: RM0433                                                                                    High-Resolution Timer (HRTIM)
Page 1503: 36.5.61          HRTIM Burst DMA Timerx update Register (HRTIM_BDTxUPR)
Page 1504: High-Resolution Timer (HRTIM)                                                                                    RM0433
Page 1504: This bit defines if the master timer MCR register is part of the list of registers to be updated by the
Page 1505: RM0433                                                                                                                                                                                                      High-Resolution Timer (HRTIM)
Page 1505: 0x000 - 0x07F                                                                                                                                                              Master timer
Page 1505: 0x080 - 0x0FF                                                                                                                                                                     Timer A
Page 1505: 0x100 - 0x17F                                                                                                                                                                     Timer B
Page 1505: 0x180 - 0x1FF                                                                                                                                                                     Timer C
Page 1505: 0x200 - 0x27F                                                                                                                                                                     Timer D
Page 1505: 0x280 - 0x2FF                                                                                                                                                                     Timer E
Page 1505: Table 317. HRTIM Register map and reset values: Master timer
Page 1506: High-Resolution Timer (HRTIM)
Page 1506: Table 317. HRTIM Register map and reset values: Master timer (continued)
Page 1507: High-Resolution Timer (HRTIM)
Page 1508: High-Resolution Timer (HRTIM)
Page 1509: High-Resolution Timer (HRTIM)
Page 1510: High-Resolution Timer (HRTIM)
Page 1511: High-Resolution Timer (HRTIM)
Page 1512: High-Resolution Timer (HRTIM)
Page 1513: TIMERSTR                   TIMDRSTR                    TIMCRSTR                   TIMBRSTR                   TIMARSTR                               Res.                       Res.                17
Page 1513: TIMERST2R                  TIMDRST2R                   TIMCRST2R                  TIMBRST2R                  TIMARST2R                              Res.                       Res.                14
Page 1513: TIMERST1R                  TIMDRST1R                   TIMCRST1R                  TIMBRST1R                  TIMARST1R                              Res.                       Res.                12
Page 1513: TIMEREP                    TIMDREP                     TIMCREP                    TIMBREP                    TIMAREP                             MREP                                              5
Page 1513: High-Resolution Timer (HRTIM)
Page 1514: Advanced-control timers (TIM1/TIM8)                                                                 RM0433
Page 1514: 37          Advanced-control timers (TIM1/TIM8)
Page 1514: The advanced-control timers (TIM1/TIM8) consist of a 16-bit auto-reload counter driven by a
Page 1514: milliseconds using the timer prescaler and the RCC clock controller prescalers.
Page 1514: The advanced-control (TIM1/TIM8) and general-purpose (TIMy) timers are completely
Page 1514: described in Section 37.3.26: Timer synchronization.
Page 1514: TIM1/TIM8 timer features include:
Page 1514: •   Synchronization circuit to control the timer with external signals and to interconnect
Page 1514: several timers together.
Page 1514: •   Repetition counter to update the timer registers only after a given number of cycles of
Page 1514: •   2 break inputs to put the timer’s output signals in a safe user selectable configuration.
Page 1515: RM0433                                                                                                               Advanced-control timers (TIM1/TIM8)
Page 1515: Figure 343. Advanced-control timer block diagram
Page 1515: TIMx_ETR                                                     ETRP                                                                                     to other timers
Page 1516: Advanced-control timers (TIM1/TIM8)                                                             RM0433
Page 1516: The main block of the programmable advanced-control timer is a 16-bit counter with its
Page 1517: RM0433                                                                   Advanced-control timers (TIM1/TIM8)
Page 1517: Timerclock = CK_CNT
Page 1517: Timerclock = CK_CNT
Page 1518: Advanced-control timers (TIM1/TIM8)                                                               RM0433
Page 1519: RM0433                                                              Advanced-control timers (TIM1/TIM8)
Page 1519: Timerclock = CK_CNT
Page 1519: Timerclock = CK_CNT
Page 1520: Advanced-control timers (TIM1/TIM8)                                                          RM0433
Page 1520: Timerclock = CK_CNT
Page 1520: Timerclock = CK_CNT
Page 1521: RM0433                                                                  Advanced-control timers (TIM1/TIM8)
Page 1521: Timerclock = CK_CNT
Page 1521: Timerclock = CK_CNT
Page 1522: Advanced-control timers (TIM1/TIM8)                                                               RM0433
Page 1523: RM0433                                                                Advanced-control timers (TIM1/TIM8)
Page 1523: Timerclock = CK_CNT
Page 1523: Timerclock = CK_CNT
Page 1524: Advanced-control timers (TIM1/TIM8)                                                          RM0433
Page 1524: Timerclock = CK_CNT
Page 1524: Timerclock = CK_CNT
Page 1525: RM0433                                                                   Advanced-control timers (TIM1/TIM8)
Page 1525: Timerclock = CK_CNT
Page 1526: Advanced-control timers (TIM1/TIM8)                                                                                         RM0433
Page 1526: Timerclock = CK_CNT
Page 1527: RM0433                                                                Advanced-control timers (TIM1/TIM8)
Page 1527: Timerclock = CK_CNT
Page 1527: Timerclock = CK_CNT
Page 1528: Advanced-control timers (TIM1/TIM8)                                                                            RM0433
Page 1528: Timerclock = CK_CNT
Page 1528: Timerclock = CK_CNT
Page 1529: RM0433                                                            Advanced-control timers (TIM1/TIM8)
Page 1529: Timer clock = CK_CNT
Page 1530: Advanced-control timers (TIM1/TIM8)                                                                                    RM0433
Page 1531: RM0433                                                                      Advanced-control timers (TIM1/TIM8)
Page 1531: The timer features an external trigger input ETR. It can be used as:
Page 1532: Advanced-control timers (TIM1/TIM8)                                                                 RM0433
Page 1533: RM0433                                                                              Advanced-control timers (TIM1/TIM8)
Page 1533: 5.         Configure the timer in external clock mode 1 by writing SMS=111 in the TIMx_SMCR
Page 1534: Advanced-control timers (TIM1/TIM8)                                                                                     RM0433
Page 1535: RM0433                                                       Advanced-control timers (TIM1/TIM8)
Page 1536: Advanced-control timers (TIM1/TIM8)                                                                                                             RM0433
Page 1537: RM0433                                                                                      Advanced-control timers (TIM1/TIM8)
Page 1538: Advanced-control timers (TIM1/TIM8)                                                                                           RM0433
Page 1539: RM0433                                                         Advanced-control timers (TIM1/TIM8)
Page 1539: timer (when the input is one of the TIx (ICxF bits in the TIMx_CCMRx register). Let’s
Page 1540: Advanced-control timers (TIM1/TIM8)                                                               RM0433
Page 1541: RM0433                                                          Advanced-control timers (TIM1/TIM8)
Page 1542: Advanced-control timers (TIM1/TIM8)                                                               RM0433
Page 1542: The timer is able to generate PWM in edge-aligned mode or center-aligned mode
Page 1543: RM0433                                                           Advanced-control timers (TIM1/TIM8)
Page 1544: Advanced-control timers (TIM1/TIM8)                                                                              RM0433
Page 1545: RM0433                                                          Advanced-control timers (TIM1/TIM8)
Page 1546: Advanced-control timers (TIM1/TIM8)                                                                  RM0433
Page 1547: RM0433                                                            Advanced-control timers (TIM1/TIM8)
Page 1548: Advanced-control timers (TIM1/TIM8)                                                               RM0433
Page 1548: The advanced-control timers (TIM1/TIM8) can output two complementary signals and
Page 1549: RM0433                                                        Advanced-control timers (TIM1/TIM8)
Page 1550: Advanced-control timers (TIM1/TIM8)                                                                   RM0433
Page 1550: generated with the TIM1 and TIM8 timers. The two break inputs are usually connected to
Page 1551: RM0433                                                         Advanced-control timers (TIM1/TIM8)
Page 1551: –    the OSSI bit in the TIMx_BDTR register defines whether the timer controls the
Page 1552: Advanced-control timers (TIM1/TIM8)                                                                                                      RM0433
Page 1552: All sources are ORed before entering the timer BRK or BRK2 inputs, as per Figure 386
Page 1553: RM0433                                                        Advanced-control timers (TIM1/TIM8)
Page 1553: TIMx_CR2 register as soon as MOE=0. If OSSI=0, the timer releases the output control
Page 1553: asynchronously so that it works even if no clock is provided to the timer.
Page 1553: –    If the timer clock is still present, then the dead-time generator is reactivated in
Page 1553: –    If OSSI=0, the timer releases the output control (taken over by the GPIO controller
Page 1554: Advanced-control timers (TIM1/TIM8)                                                   RM0433
Page 1555: RM0433                                                         Advanced-control timers (TIM1/TIM8)
Page 1555: The two break inputs have different behaviors on timer outputs:
Page 1555: Table 320. Behavior of timer outputs versus BRK/BRK2 inputs
Page 1555: Timer outputs
Page 1556: Advanced-control timers (TIM1/TIM8)                                                                              RM0433
Page 1556: the timer 1 and 8 are featuring bidirectional break inputs/outputs combining the two sources,
Page 1556: drain) and the Timerx’s TIMx_BKINy input. They allow to have:
Page 1556: To the timer break input
Page 1557: RM0433                                                           Advanced-control timers (TIM1/TIM8)
Page 1557: for both values of the enable bit OCxCE. In this example, the timer TIMx is programmed in
Page 1558: Advanced-control timers (TIM1/TIM8)                                                            RM0433
Page 1559: RM0433                                                            Advanced-control timers (TIM1/TIM8)
Page 1559: initial value. Before starting (when the timer is waiting for the trigger), the configuration must
Page 1560: Advanced-control timers (TIM1/TIM8)                                                              RM0433
Page 1560: The timer must be in Slave mode, with the bits SMS[3:0] = ‘1000’ (Combined Reset + trigger
Page 1560: If the timer is configured in Up-counting mode, the corresponding CCRx must be set to 0
Page 1560: (the ARR register sets the pulse length). If the timer is configured in Down-counting mode,
Page 1561: RM0433                                                        Advanced-control timers (TIM1/TIM8)
Page 1562: Advanced-control timers (TIM1/TIM8)                                                                            RM0433
Page 1563: RM0433                                                           Advanced-control timers (TIM1/TIM8)
Page 1563: The timer, when configured in Encoder Interface mode provides information on the sensor’s
Page 1563: measuring the period between two encoder events using a second timer configured in
Page 1563: another timer). when available, it is also possible to read its value through a DMA request.
Page 1563: interrupt flag (UIF) into the timer counter register’s bit 31 (TIMxCNT[31]). This allows both
Page 1563: In 32-bit timer implementations, when the IUFREMAP bit is set, bit 31 of the counter is
Page 1563: Interrupt Flag UIF into the timer counter register’s bit 31 (TIMxCNT[31]). This allows both
Page 1564: Advanced-control timers (TIM1/TIM8)                                                              RM0433
Page 1564: 37.3.24     Timer input XOR function
Page 1564: The XOR output can be used with all the timer input functions such as trigger or input
Page 1564: This is done using the advanced-control timers (TIM1 or TIM8) to generate PWM signals to
Page 1564: drive the motor and another timer TIMx (TIM2, TIM3, TIM4) referred to as “interfacing timer”
Page 1564: in Figure 398. The “interfacing timer” captures the 3 timer input pins (CC1, CC2, CC3)
Page 1564: On the “interfacing timer”, capture/compare channel 1 is configured in capture mode,
Page 1564: The “interfacing timer” can be used in output mode to generate a pulse which changes the
Page 1564: configuration of the channels of the advanced-control timer (TIM1 or TIM8) (by triggering a
Page 1564: COM event). The TIM1 timer is used to generate PWM signals to drive the motor. To do this,
Page 1564: the interfacing timer channel must be programmed so that a positive pulse is generated
Page 1564: advanced-control timer (TIM1 or TIM8) through the TRGO output.
Page 1565: RM0433                                                        Advanced-control timers (TIM1/TIM8)
Page 1565: Example: you want to change the PWM configuration of your advanced-control timer TIM1
Page 1565: the TIMx timers.
Page 1565: •   Configure 3 timer inputs ORed to the TI1 input channel by writing the TI1S bit in the
Page 1565: In the advanced-control timer TIM1, the right ITR input must be selected as trigger input, the
Page 1565: timer is programmed to generate PWM signals, the capture/compare control signals are
Page 1566: Advanced-control timers (TIM1/TIM8)                                     RM0433
Page 1567: RM0433                                                             Advanced-control timers (TIM1/TIM8)
Page 1567: 37.3.26   Timer synchronization
Page 1567: The TIMx timers are linked together internally for timer synchronization or chaining. They
Page 1567: •       Configure the timer in reset mode by writing SMS=100 in TIMx_SMCR register. Select
Page 1568: Advanced-control timers (TIM1/TIM8)                                                                  RM0433
Page 1568: •       Configure the timer in gated mode by writing SMS=101 in TIMx_SMCR register. Select
Page 1569: RM0433                                                           Advanced-control timers (TIM1/TIM8)
Page 1569: •      Configure the timer in trigger mode by writing SMS=110 in TIMx_SMCR register. Select
Page 1570: Advanced-control timers (TIM1/TIM8)                                                             RM0433
Page 1570: 3.   Configure the timer in trigger mode by writing SMS=110 in TIMx_SMCR register. Select
Page 1570: Note:       The clock of the slave peripherals (timer, ADC, ...) receiving the TRGO or the TRGO2
Page 1570: signals must be enabled prior to receive events from the master timer, and the clock
Page 1570: master timer.
Page 1571: RM0433                                                        Advanced-control timers (TIM1/TIM8)
Page 1571: The timer can generate an ADC triggering event with various internal signals, such as reset,
Page 1571: Note:     The clock of the slave peripherals (timer, ADC, ...) receiving the TRGO or the TRGO2
Page 1571: signals must be enabled prior to receive events from the master timer, and the clock
Page 1571: master timer.
Page 1571: Note:     The clock of the ADC must be enabled prior to receive events from the master timer, and
Page 1571: must not be changed on-the-fly while triggers are received from the timer.
Page 1571: The TIMx timers have the capability to generate multiple DMA requests upon a single event.
Page 1571: The main purpose is to be able to re-program part of the timer multiple times without
Page 1571: On a given timer event, the timer launches a sequence of DMA requests (burst). Each write
Page 1571: into the TIMx_DMAR register is actually redirected to one of the timer registers.
Page 1571: The DBL[4:0] bits in the TIMx_DCR register set the DMA burst length. The timer recognizes
Page 1571: As an example, the timer DMA burst feature is used to update the contents of the CCRx
Page 1572: Advanced-control timers (TIM1/TIM8)                                                              RM0433
Page 1573: RM0433                                                                       Advanced-control timers (TIM1/TIM8)
Page 1573: This bit-field indicates the division ratio between the timer clock (CK_INT) frequency and the
Page 1573: Note: This bit is read only when the timer is configured in Center-aligned mode or Encoder
Page 1574: Advanced-control timers (TIM1/TIM8)                                                                           RM0433
Page 1575: RM0433                                                                  Advanced-control timers (TIM1/TIM8)
Page 1575: useful to start several timers at the same time or to control a window in which a slave timer is
Page 1575: master timer can then be used as a prescaler for a slave timer.
Page 1575: Note: The clock of the slave timer or ADC must be enabled prior to receive events from the
Page 1575: master timer, and must not be changed on-the-fly while triggers are received from the
Page 1575: master timer.
Page 1576: Advanced-control timers (TIM1/TIM8)                                                                          RM0433
Page 1576: These bits allow to select the information to be sent in master mode to slave timers for
Page 1576: useful to start several timers at the same time or to control a window in which a slave timer is
Page 1576: timer can then be used as a prescaler for a slave timer.
Page 1576: Note: The clock of the slave timer or ADC must be enabled prior to receive events from the
Page 1576: master timer, and must not be changed on-the-fly while triggers are received from the
Page 1576: master timer.
Page 1577: RM0433                                                                      Advanced-control timers (TIM1/TIM8)
Page 1578: Advanced-control timers (TIM1/TIM8)                                                                       RM0433
Page 1578: synchronization between the current timer and its slaves (through TRGO). It is useful if we
Page 1578: want to synchronize several timers on a single external event.
Page 1578: 00101: Filtered Timer Input 1 (TI1FP1)
Page 1578: 00110: Filtered Timer Input 2 (TI2FP2)
Page 1578: meaning for each Timer.
Page 1579: RM0433                                                                        Advanced-control timers (TIM1/TIM8)
Page 1579: Note: The clock of the slave peripherals (timer, ADC, ...) receiving the TRGO or the TRGO2
Page 1579: signals must be enabled prior to receive events from the master timer, and the clock
Page 1579: the master timer.
Page 1580: Advanced-control timers (TIM1/TIM8)                               RM0433
Page 1581: RM0433                                                                            Advanced-control timers (TIM1/TIM8)
Page 1582: Advanced-control timers (TIM1/TIM8)                                                                      RM0433
Page 1583: RM0433                                                                    Advanced-control timers (TIM1/TIM8)
Page 1584: Advanced-control timers (TIM1/TIM8)                                                                                     RM0433
Page 1585: RM0433                                                                Advanced-control timers (TIM1/TIM8)
Page 1586: Advanced-control timers (TIM1/TIM8)                                                                       RM0433
Page 1587: RM0433                                                                  Advanced-control timers (TIM1/TIM8)
Page 1588: Advanced-control timers (TIM1/TIM8)                                                                                     RM0433
Page 1589: RM0433                                                                Advanced-control timers (TIM1/TIM8)
Page 1590: Advanced-control timers (TIM1/TIM8)                                                                              RM0433
Page 1591: RM0433                                                            Advanced-control timers (TIM1/TIM8)
Page 1592: Advanced-control timers (TIM1/TIM8)                                                                        RM0433
Page 1593: RM0433                                                                     Advanced-control timers (TIM1/TIM8)
Page 1593: Output disabled (not driven by the timer: Hi-Z)
Page 1593: 0           0           1       by the timer: Hi-Z)
Page 1593: 0           1           0                                     the timer: Hi-Z)
Page 1593: 0                      X           X       Output disabled (not driven by the timer anymore). The
Page 1594: Advanced-control timers (TIM1/TIM8)                                                                            RM0433
Page 1595: RM0433                                                                 Advanced-control timers (TIM1/TIM8)
Page 1596: Advanced-control timers (TIM1/TIM8)                                                                         RM0433
Page 1597: RM0433                                                                        Advanced-control timers (TIM1/TIM8)
Page 1598: Advanced-control timers (TIM1/TIM8)                                                                      RM0433
Page 1599: RM0433                                                            Advanced-control timers (TIM1/TIM8)
Page 1599: in the timer.
Page 1599: 0: When inactive, OC/OCN outputs are disabled (the timer releases the output control which
Page 1599: or CCxNE=1 (the output is still controlled by the timer).
Page 1600: Advanced-control timers (TIM1/TIM8)                                                                              RM0433
Page 1600: 0: When inactive, OC/OCN outputs are disabled (the timer releases the output control which
Page 1600: idle level after the deadtime. The timer maintains its control over the output.
Page 1601: RM0433                                                                    Advanced-control timers (TIM1/TIM8)
Page 1601: This 5-bit vector defines the length of DMA transfers (the timer recognizes a burst transfer
Page 1601: so on. So with the transfer Timer, you also have to specify the size of data transferred by
Page 1602: Advanced-control timers (TIM1/TIM8)                                                                                         RM0433
Page 1603: RM0433                                                                    Advanced-control timers (TIM1/TIM8)
Page 1604: Advanced-control timers (TIM1/TIM8)                                                                         RM0433
Page 1605: RM0433                                                             Advanced-control timers (TIM1/TIM8)
Page 1605: This bit enables the dfsdm1_break[0] for the timer’s BRK input. dfsdm1_break[0] output is
Page 1605: This bit enables the COMP2 for the timer’s BRK input. COMP2 output is ‘ORed’ with the
Page 1605: This bit enables the COMP1 for the timer’s BRK input. COMP1 output is ‘ORed’ with the
Page 1606: Advanced-control timers (TIM1/TIM8)                                                                           RM0433
Page 1606: This bit enables the BKIN alternate function input for the timer’s BRK input. BKIN input is
Page 1607: RM0433                                                                      Advanced-control timers (TIM1/TIM8)
Page 1607: This bit enables the dfsdm1_break[1] for the timer’s BRK2 input. dfsdm1_break[1] output is
Page 1607: This bit enables the COMP2 for the timer’s BRK2 input. COMP2 output is ‘ORed’ with the
Page 1607: This bit enables the COMP1 for the timer’s BRK2 input. COMP1 output is ‘ORed’ with the
Page 1607: This bit enables the BKIN2 alternate function input for the timer’s BRK2 input. BKIN2 input is
Page 1608: Advanced-control timers (TIM1/TIM8)                                                                      RM0433
Page 1608: This bit enables the dfsdm1_break[2] for the timer’s BRK input. dfsdm1_break[2] output is
Page 1609: RM0433                                                                     Advanced-control timers (TIM1/TIM8)
Page 1609: This bit enables the COMP2 for the timer’s BRK input. COMP2 output is ‘ORed’ with the
Page 1609: This bit enables the COMP1 for the timer’s BRK input. COMP1 output is ‘ORed’ with the
Page 1609: This bit enables the BKIN alternate function input for the timer’s BRK input. BKIN input is
Page 1610: Advanced-control timers (TIM1/TIM8)                                                                      RM0433
Page 1610: This bit enables the dfsdm1_break[3] for the timer’s BRK2 input. dfsdm1_break[3] output is
Page 1610: This bit enables the COMP2 for the timer’s BRK2 input. COMP2 output is ‘ORed’ with the
Page 1610: This bit enables the COMP1 for the timer’s BRK2 input. COMP1 output is ‘ORed’ with the
Page 1610: This bit enables the BKIN2 alternate function input for the timer’s BRK2 input. BKIN2 input is
Page 1611: RM0433                                                                        Advanced-control timers (TIM1/TIM8)
Page 1611: 37.4.28         TIM1 timer input selection register (TIM1_TISEL)
Page 1611: 37.4.29         TIM8 timer input selection register (TIM8_TISEL)
Page 1612: Advanced-control timers (TIM1/TIM8)                                  RM0433
Page 1613: Advanced-control timers (TIM1/TIM8)
Page 1614: Advanced-control timers (TIM1/TIM8)
Page 1615: Advanced-control timers (TIM1/TIM8)
Page 1616: Advanced-control timers (TIM1/TIM8)
Page 1617: Advanced-control timers (TIM1/TIM8)
Page 1618: Advanced-control timers (TIM1/TIM8)
Page 1619: RM0433                                              General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1619: 38       General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1619: The general-purpose timers consist of a 16-bit or 32-bit auto-reload counter driven by a
Page 1619: milliseconds using the timer prescaler and the RCC clock controller prescalers.
Page 1619: The timers are completely independent, and do not share any resources. They can be
Page 1619: synchronized together as described in Section 38.3.19: Timer synchronization.
Page 1619: General-purpose TIMx timer features include:
Page 1619: •   Synchronization circuit to control the timer with external signals and to interconnect
Page 1619: several timers.
Page 1620: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                                                                                 RM0433
Page 1620: Figure 403. General-purpose timer block diagram
Page 1620: detector & prescaler                                                                                  to other timers
Page 1621: RM0433                                              General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1621: The main block of the programmable timer is a 16-bit/32-bit counter with its related auto-
Page 1622: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                                                RM0433
Page 1622: Timerclock = CK_CNT
Page 1622: Timerclock = CK_CNT
Page 1623: RM0433                                                 General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1623: Timerclock = CK_CNT
Page 1624: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                      RM0433
Page 1624: Timerclock = CK_CNT
Page 1624: Timerclock = CK_CNT
Page 1625: RM0433                                                   General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1625: Timerclock = CK_CNT
Page 1625: Timerclock = CK_CNT
Page 1626: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                      RM0433
Page 1626: Timerclock = CK_CNT
Page 1627: RM0433                                                    General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1627: Timerclock = CK_CNT
Page 1627: Timerclock = CK_CNT
Page 1628: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                 RM0433
Page 1628: Timerclock = CK_CNT
Page 1628: Timerclock = CK_CNT
Page 1629: RM0433                                                      General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1629: Timerclock = CK_CNT
Page 1630: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                        RM0433
Page 1630: Timerclock = CK_CNT
Page 1631: RM0433                                                     General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1631: Timerclock = CK_CNT
Page 1631: Timerclock = CK_CNT
Page 1632: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                   RM0433
Page 1632: Timerclock = CK_CNT
Page 1632: Timerclock = CK_CNT
Page 1633: RM0433                                                     General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1633: Timer clock = CK_CNT
Page 1633: •      Internal trigger inputs (ITRx): using one timer as prescaler for another timer, for
Page 1633: example, you can configure Timer 13 to act as a prescaler for Timer 2. Refer to : Using
Page 1633: one timer as prescaler for another timer on page 1658 for more details.
Page 1634: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                                   RM0433
Page 1635: RM0433                                                   General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1635: 5.   Configure the timer in external clock mode 1 by writing SMS=111 in the TIMx_SMCR
Page 1636: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                                                      RM0433
Page 1637: RM0433                                                                    General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1638: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                                        RM0433
Page 1639: RM0433                                              General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1639: timer (when the input is one of the TIx (ICxF bits in the TIMx_CCMRx register). Let’s
Page 1640: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                RM0433
Page 1641: RM0433                                              General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1642: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                      RM0433
Page 1643: RM0433                                                 General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1643: This forces the PWM by software while the timer is running.
Page 1643: The timer is able to generate PWM in edge-aligned mode or center-aligned mode
Page 1644: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                   RM0433
Page 1645: RM0433                                                        General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1646: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                             RM0433
Page 1647: RM0433                                                      General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1648: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                        RM0433
Page 1648: for both values of the OCxCE enable bit. In this example, the timer TIMx is programmed in
Page 1649: RM0433                                                   General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1649: initial value. Before starting (when the timer is waiting for the trigger), the configuration must
Page 1650: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                      RM0433
Page 1650: The timer must be in Slave mode, with the bits SMS[3:0] = ‘1000’ (Combined Reset + trigger
Page 1650: If the timer is configured in Up-counting mode, the corresponding CCRx must be set to 0
Page 1650: (the ARR register sets the pulse length). If the timer is configured in Down-counting mode
Page 1651: RM0433                                              General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1652: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                           RM0433
Page 1653: RM0433                                              General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1653: The timer, when configured in Encoder Interface mode provides information on the sensor’s
Page 1653: measuring the period between two encoder events using a second timer configured in
Page 1653: another timer). when available, it is also possible to read its value through a DMA request
Page 1653: interrupt flag (UIF) into bit 31 of the timer counter register’s bit 31 (TIMxCNT[31]). This
Page 1653: In 32-bit timer implementations, when the IUFREMAP bit is set, bit 31 of the counter is
Page 1653: 38.3.17   Timer input XOR function
Page 1653: The XOR output can be used with all the timer input functions such as trigger or input
Page 1654: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                      RM0433
Page 1654: 38.3.18     Timers and external trigger synchronization
Page 1654: The TIMx Timers can be synchronized with an external trigger in several modes: Reset
Page 1654: 2.   Configure the timer in reset mode by writing SMS=100 in TIMx_SMCR register. Select
Page 1655: RM0433                                                    General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1655: 2.   Configure the timer in gated mode by writing SMS=101 in TIMx_SMCR register. Select
Page 1656: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                     RM0433
Page 1656: 2.   Configure the timer in trigger mode by writing SMS=110 in TIMx_SMCR register. Select
Page 1656: 3.   Configure the timer in trigger mode by writing SMS=110 in TIMx_SMCR register. Select
Page 1657: RM0433                                                            General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1657: 38.3.19        Timer synchronization
Page 1657: The TIMx timers are linked together internally for timer synchronization or chaining. When
Page 1657: one Timer is configured in Master Mode, it can reset, start, stop or clock the counter of
Page 1657: another Timer configured in Slave Mode.
Page 1657: Figure 446: Master/Slave timer example presents an overview of the trigger selection and
Page 1657: Figure 446. Master/Slave timer example
Page 1658: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                   RM0433
Page 1658: Using one timer as prescaler for another timer
Page 1658: 4.   Finally both timers must be enabled by setting their respective CEN bits (TIMx_CR1
Page 1658: Using one timer to enable another timer
Page 1658: In this example, we control the enable of TIM2 with the output compare 1 of Timer 3. Refer
Page 1659: RM0433                                                    General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1659: value by resetting both timers before starting TIM3. You can then write any value you want
Page 1659: in the timer counters. The timers can easily be reset by software using the UG bit in the
Page 1659: same for both timers. TIM2 stops when TIM3 is disabled by writing ‘0 to the CEN bit in the
Page 1659: Using one timer to start another timer
Page 1659: In this example, we set the enable of Timer 2 with the update event of Timer 3. Refer to
Page 1659: Figure 446 for connections. Timer 2 starts counting from its current value (which can be
Page 1659: non-zero) on the divided internal clock as soon as the update event is generated by Timer 1.
Page 1659: When Timer 2 receives the trigger signal its CEN bit is automatically set and the counter
Page 1660: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                    RM0433
Page 1660: Starting 2 timers synchronously in response to an external trigger
Page 1661: RM0433                                                General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1661: Note:     In this example both timers are initialized before starting (by setting their respective UG
Page 1661: Note:     The clock of the slave peripherals (timer, ADC, ...) receiving the TRGO or the TRGO2
Page 1661: signals must be enabled prior to receive events from the master timer, and the clock
Page 1661: master timer.
Page 1661: The TIMx timers have the capability to generate multiple DMA requests upon a single event.
Page 1661: The main purpose is to be able to re-program part of the timer multiple times without
Page 1662: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                    RM0433
Page 1662: On a given timer event, the timer launches a sequence of DMA requests (burst). Each write
Page 1662: into the TIMx_DMAR register is actually redirected to one of the timer registers.
Page 1662: The DBL[4:0] bits in the TIMx_DCR register set the DMA burst length. The timer recognizes
Page 1662: As an example, the timer DMA burst feature is used to update the contents of the CCRx
Page 1663: RM0433                                             General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1664: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                     RM0433
Page 1664: This bit-field indicates the division ratio between the timer clock (CK_INT) frequency and
Page 1664: Note: This bit is read only when the timer is configured in Center-aligned mode or Encoder
Page 1665: RM0433                                                       General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1666: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                  RM0433
Page 1666: These bits allow to select the information to be sent in master mode to slave timers for
Page 1666: useful to start several timers at the same time or to control a window in which a slave timer is
Page 1666: timer can then be used as a prescaler for a slave timer.
Page 1666: Note: The clock of the slave timer or ADC must be enabled prior to receive events from the
Page 1666: master timer, and must not be changed on-the-fly while triggers are received from the
Page 1666: master timer.
Page 1667: RM0433                                                        General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1668: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                              RM0433
Page 1668: synchronization between the current timer and its slaves (through TRGO). It is useful if we
Page 1668: want to synchronize several timers on a single external event.
Page 1669: RM0433                                                     General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1669: 00101: Filtered Timer Input 1 (TI1FP1)
Page 1669: 00110: Filtered Timer Input 2 (TI2FP2)
Page 1669: meaning for each Timer.
Page 1669: Note: The clock of the slave peripherals (timer, ADC, ...) receiving the TRGO or the TRGO2
Page 1669: signals must be enabled prior to receive events from the master timer, and the clock
Page 1669: the master timer.
Page 1670: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                          RM0433
Page 1671: RM0433                                                           General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1672: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                      RM0433
Page 1673: RM0433                                                    General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1674: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                           RM0433
Page 1675: RM0433                                                  General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1676: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                RM0433
Page 1677: RM0433                                                            General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1678: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                RM0433
Page 1679: RM0433                                                           General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1680: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                      RM0433
Page 1681: RM0433                                                       General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1681: Reserved on other timers
Page 1682: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                 RM0433
Page 1682: CCR1[31:16] (depending on timers)
Page 1682: CCR2[31:16] (depending on timers)
Page 1683: RM0433                                                          General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1683: CCR3[31:16] (depending on timers)
Page 1683: CCR4[31:16] (depending on timers)
Page 1684: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                  RM0433
Page 1684: This 5-bit vector defines the number of DMA transfers (the timer recognizes a burst transfer
Page 1685: RM0433                                                      General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1686: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                RM0433
Page 1687: RM0433                                                         General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1687: 38.4.23         TIM2 timer input selection register (TIM2_TISEL)
Page 1687: 38.4.24         TIM3 timer input selection register (TIM3_TISEL)
Page 1688: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                     RM0433
Page 1688: 38.4.25         TIM4 timer input selection register (TIM4_TISEL)
Page 1689: RM0433                                                         General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1689: 38.4.26         TIM5 timer input selection register (TIM5_TISEL)
Page 1690: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                    RM0433
Page 1691: General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1692: General-purpose timers (TIM2/TIM3/TIM4/TIM5)                                                                                                                                                                                                RM0433
Page 1692: 0x24                                       (TIM2 and TIM5 only, reserved on the other timers)
Page 1692: 0x2C                                      (TIM2 and TIM5 only, reserved on the other timers)
Page 1692: 0x34                                      (TIM2 and TIM5 only, reserved on the other timers)
Page 1692: 0x38                                      (TIM2 and TIM5 only, reserved on the other timers)
Page 1692: 0x3C                                      (TIM2 and TIM5 only, reserved on the other timers)
Page 1692: 0x40                                      (TIM2 and TIM5 only, reserved on the other timers)
Page 1693: RM0433                                                                                                            General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 1694: General-purpose timers (TIM12/TIM13/TIM14)                                                          RM0433
Page 1694: 39          General-purpose timers (TIM12/TIM13/TIM14)
Page 1694: The TIM12/TIM13/TIM14 general-purpose timers consist in a 16-bit auto-reload counter
Page 1694: milliseconds using the timer prescaler and the RCC clock controller prescalers.
Page 1694: The TIM12/TIM13/TIM14 timers are completely independent, and do not share any
Page 1694: resources. They can be synchronized together as described in Section 39.3.17: Timer
Page 1694: The features of the TIM12 general-purpose timer include:
Page 1694: •   Synchronization circuit to control the timer with external signals and to interconnect
Page 1694: several timers together
Page 1695: RM0433                                                                         General-purpose timers (TIM12/TIM13/TIM14)
Page 1695: Figure 452. General-purpose timer block diagram (TIM12)
Page 1695: The features of general-purpose timers TIM13/TIM14 include:
Page 1696: General-purpose timers (TIM12/TIM13/TIM14)                                                                                                RM0433
Page 1696: Figure 453. General-purpose timer block diagram (TIM13/TIM14)
Page 1697: RM0433                                               General-purpose timers (TIM12/TIM13/TIM14)
Page 1697: The main block of the timer is a 16-bit up-counter with its related auto-reload register. The
Page 1698: General-purpose timers (TIM12/TIM13/TIM14)                                                                                                   RM0433
Page 1698: Timerclock = CK_CNT
Page 1698: Timerclock = CK_CNT
Page 1699: RM0433                                                  General-purpose timers (TIM12/TIM13/TIM14)
Page 1699: Timerclock = CK_CNT
Page 1700: General-purpose timers (TIM12/TIM13/TIM14)                                                           RM0433
Page 1700: Timerclock = CK_CNT
Page 1700: Timerclock = CK_CNT
Page 1701: RM0433                                                        General-purpose timers (TIM12/TIM13/TIM14)
Page 1701: Timerclock = CK_CNT
Page 1701: Timerclock = CK_CNT
Page 1702: General-purpose timers (TIM12/TIM13/TIM14)                                                                       RM0433
Page 1702: Timerclock = CK_CNT
Page 1702: timer. For instance, another timer can be configured as a prescaler for TIM12. Refer to
Page 1702: Section : Using one timer as prescaler for another timer for more details.
Page 1703: RM0433                                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1704: General-purpose timers (TIM12/TIM13/TIM14)                                                          RM0433
Page 1704: 5.   Configure the timer in external clock mode 1 by writing SMS=’111’ in the TIMx_SMCR
Page 1705: RM0433                                                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1706: General-purpose timers (TIM12/TIM13/TIM14)                                                                                  RM0433
Page 1706: timer (by programming the ICxF bits in the TIMx_CCMRx register if the input is one of
Page 1707: RM0433                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1708: General-purpose timers (TIM12/TIM13/TIM14)                                                                  RM0433
Page 1709: RM0433                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1710: General-purpose timers (TIM12/TIM13/TIM14)                                                              RM0433
Page 1710: The timer is able to generate PWM in edge-aligned mode only since the counter is
Page 1711: RM0433                                                   General-purpose timers (TIM12/TIM13/TIM14)
Page 1712: General-purpose timers (TIM12/TIM13/TIM14)                                                               RM0433
Page 1712: initial value. Before starting (when the timer is waiting for the trigger), the configuration must
Page 1713: RM0433                                                  General-purpose timers (TIM12/TIM13/TIM14)
Page 1714: General-purpose timers (TIM12/TIM13/TIM14)                                                       RM0433
Page 1714: The timer must be in Slave mode, with the bits SMS[3:0] = ‘1000’ (Combined Reset + trigger
Page 1714: If the timer is configured in up-counting mode, the corresponding CCRx must be set to 0
Page 1714: (the ARR register sets the pulse length). If the timer is configured in down-counting mode,
Page 1715: RM0433                                                 General-purpose timers (TIM12/TIM13/TIM14)
Page 1715: Interrupt Flag UIF into bit 31 of the timer counter register (TIMxCNT[31]). This allows to
Page 1715: 39.3.14   Timer input XOR function
Page 1715: The XOR output can be used with all the timer input functions such as trigger or input
Page 1715: The TIM12 timer can be synchronized with an external trigger in several modes: Reset
Page 1716: General-purpose timers (TIM12/TIM13/TIM14)                                                         RM0433
Page 1716: 2.   Configure the timer in reset mode by writing SMS=’100’ in TIMx_SMCR register. Select
Page 1716: 2.   Configure the timer in gated mode by writing SMS=’101’ in TIMx_SMCR register.
Page 1717: RM0433                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1717: 2.   Configure the timer in trigger mode by writing SMS=’110’ in TIMx_SMCR register.
Page 1718: General-purpose timers (TIM12/TIM13/TIM14)                                                          RM0433
Page 1719: RM0433                                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1719: 39.3.17          Timer synchronization (TIM12)
Page 1719: The TIM timers are linked together internally for timer synchronization or chaining. Refer to
Page 1719: Section 38.3.19: Timer synchronization for details.
Page 1719: Note:            The clock of the slave timer must be enabled prior to receive events from the master timer,
Page 1719: and must not be changed on-the-fly while triggers are received from the master timer.
Page 1719: This bit-field indicates the division ratio between the timer clock (CK_INT) frequency and
Page 1720: General-purpose timers (TIM12/TIM13/TIM14)                                                                  RM0433
Page 1721: RM0433                                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1721: These bits allow to select the information to be sent in master mode to slave timers for
Page 1721: useful to start several timers at the same time or to control a window in which a slave
Page 1721: timer is enable. The Counter Enable signal is generated by a logic OR between CEN
Page 1721: timer can then be used as a prescaler for a slave timer.
Page 1721: synchronization between the current timer and its slaves (through TRGO). It is useful in
Page 1721: order to synchronize several timers on a single external event.
Page 1722: General-purpose timers (TIM12/TIM13/TIM14)                                                                   RM0433
Page 1722: 00101: Filtered Timer Input 1 (TI1FP1)
Page 1722: 00110: Filtered Timer Input 2 (TI2FP2)
Page 1722: meaning of ITRx for each timer.
Page 1722: Note: The clock of the slave timer must be enabled prior to receive events from the master
Page 1722: timer, and must not be changed on-the-fly while triggers are received from the master
Page 1722: timer.
Page 1723: RM0433                                                                  General-purpose timers (TIM12/TIM13/TIM14)
Page 1724: General-purpose timers (TIM12/TIM13/TIM14)                                                                        RM0433
Page 1725: RM0433                                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1726: General-purpose timers (TIM12/TIM13/TIM14)                                                               RM0433
Page 1727: RM0433                                                     General-purpose timers (TIM12/TIM13/TIM14)
Page 1728: General-purpose timers (TIM12/TIM13/TIM14)                                                                  RM0433
Page 1729: RM0433                                                              General-purpose timers (TIM12/TIM13/TIM14)
Page 1730: General-purpose timers (TIM12/TIM13/TIM14)                                                                       RM0433
Page 1731: RM0433                                                          General-purpose timers (TIM12/TIM13/TIM14)
Page 1732: General-purpose timers (TIM12/TIM13/TIM14)                                                                    RM0433
Page 1732: 39.4.14         TIM12 timer input selection register (TIM12_TISEL)
Page 1733: General-purpose timers (TIM12/TIM13/TIM14)
Page 1734: General-purpose timers (TIM12/TIM13/TIM14)                                                                                                                                                                              RM0433
Page 1735: RM0433                                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1735: This bit-field indicates the division ratio between the timer clock (CK_INT) frequency and
Page 1736: General-purpose timers (TIM12/TIM13/TIM14)                                                                     RM0433
Page 1737: RM0433                                                              General-purpose timers (TIM12/TIM13/TIM14)
Page 1738: General-purpose timers (TIM12/TIM13/TIM14)                                                                        RM0433
Page 1739: RM0433                                                       General-purpose timers (TIM12/TIM13/TIM14)
Page 1740: General-purpose timers (TIM12/TIM13/TIM14)                                                                           RM0433
Page 1741: RM0433                                                                General-purpose timers (TIM12/TIM13/TIM14)
Page 1742: General-purpose timers (TIM12/TIM13/TIM14)                                                                   RM0433
Page 1743: RM0433                                                              General-purpose timers (TIM12/TIM13/TIM14)
Page 1743: 39.5.11         TIM13 timer input selection register (TIM13_TISEL)
Page 1743: 39.5.12         TIM14 timer input selection register (TIM14_TISEL)
Page 1744: General-purpose timers (TIM12/TIM13/TIM14)
Page 1745: RM0433                                                                                                                    General-purpose timers (TIM12/TIM13/TIM14)
Page 1746: General-purpose timers (TIM15/TIM16/TIM17)                                                          RM0433
Page 1746: 40          General-purpose timers (TIM15/TIM16/TIM17)
Page 1746: The TIM15/TIM16/TIM17 timers consist of a 16-bit auto-reload counter driven by a
Page 1746: milliseconds using the timer prescaler and the RCC clock controller prescalers.
Page 1746: The TIM15/TIM16/TIM17 timers are completely independent, and do not share any
Page 1746: resources. TIM15 can be synchronized as described in Section 40.4.21: Timer
Page 1746: •   Synchronization circuit to control the timer with external signals and to interconnect
Page 1746: several timers together
Page 1746: •   Repetition counter to update the timer registers only after a given number of cycles of
Page 1746: •   Break input to put the timer’s output signals in the reset state or a known state
Page 1747: RM0433                                              General-purpose timers (TIM15/TIM16/TIM17)
Page 1747: The TIM16/TIM17 timers include the following features:
Page 1747: •   Repetition counter to update the timer registers only after a given number of cycles of
Page 1747: •   Break input to put the timer’s output signals in the reset state or a known state
Page 1748: General-purpose timers (TIM15/TIM16/TIM17)                                                                                                                                RM0433
Page 1748: to other timers
Page 1749: RM0433                                                                                          General-purpose timers (TIM15/TIM16/TIM17)
Page 1750: General-purpose timers (TIM15/TIM16/TIM17)                                                      RM0433
Page 1750: The main block of the programmable advanced-control timer is a 16-bit upcounter with its
Page 1751: RM0433                                                            General-purpose timers (TIM15/TIM16/TIM17)
Page 1751: Timerclock = CK_CNT
Page 1751: Timerclock = CK_CNT
Page 1752: General-purpose timers (TIM15/TIM16/TIM17)                                                        RM0433
Page 1753: RM0433                                                     General-purpose timers (TIM15/TIM16/TIM17)
Page 1753: Timerclock = CK_CNT
Page 1753: Timerclock = CK_CNT
Page 1754: General-purpose timers (TIM15/TIM16/TIM17)                                                  RM0433
Page 1754: Timerclock = CK_CNT
Page 1754: Timerclock = CK_CNT
Page 1755: RM0433                                                     General-purpose timers (TIM15/TIM16/TIM17)
Page 1755: Timerclock = CK_CNT
Page 1755: Timerclock = CK_CNT
Page 1756: General-purpose timers (TIM15/TIM16/TIM17)                                                       RM0433
Page 1757: RM0433                                                   General-purpose timers (TIM15/TIM16/TIM17)
Page 1757: •   Internal trigger inputs (ITRx) (only for TIM15): using one timer as the prescaler for
Page 1757: another timer, for example, you can configure TIM1 to act as a prescaler for TIM15.
Page 1757: Refer to Using one timer as prescaler for another timer on page 1658 for more details.
Page 1758: General-purpose timers (TIM15/TIM16/TIM17)                                                                                                          RM0433
Page 1759: RM0433                                                  General-purpose timers (TIM15/TIM16/TIM17)
Page 1759: 5.   Configure the timer in external clock mode 1 by writing SMS=111 in the TIMx_SMCR
Page 1760: General-purpose timers (TIM15/TIM16/TIM17)                                                                                                              RM0433
Page 1761: RM0433                                                          General-purpose timers (TIM15/TIM16/TIM17)
Page 1762: General-purpose timers (TIM15/TIM16/TIM17)                                                          RM0433
Page 1762: timer (when the input is one of the TIx (ICxF bits in the TIMx_CCMRx register). Let’s
Page 1763: RM0433                                                     General-purpose timers (TIM15/TIM16/TIM17)
Page 1764: General-purpose timers (TIM15/TIM16/TIM17)                                                          RM0433
Page 1765: RM0433                                                        General-purpose timers (TIM15/TIM16/TIM17)
Page 1766: General-purpose timers (TIM15/TIM16/TIM17)                                                        RM0433
Page 1767: RM0433                                                        General-purpose timers (TIM15/TIM16/TIM17)
Page 1768: General-purpose timers (TIM15/TIM16/TIM17)                                                        RM0433
Page 1768: The TIM15/TIM16/TIM17 general-purpose timers can output one complementary signal and
Page 1769: RM0433                                               General-purpose timers (TIM15/TIM16/TIM17)
Page 1770: General-purpose timers (TIM15/TIM16/TIM17)                                                         RM0433
Page 1770: generated with the TIM15/TIM16/TIM17 timers. The break input is usually connected to fault
Page 1770: •    the OSSI bit in the TIMx_BDTR register defines whether the timer controls the output in
Page 1771: RM0433                                                                          General-purpose timers (TIM15/TIM16/TIM17)
Page 1772: General-purpose timers (TIM15/TIM16/TIM17)                                                        RM0433
Page 1772: TIMx_CR2 register as soon as MOE=0. If OSSI=0, the timer releases the output control
Page 1772: timer.
Page 1772: –    If the timer clock is still present, then the dead-time generator is reactivated in
Page 1772: –    If OSSI=0 then the timer releases the enable outputs (taken over by the AFIO
Page 1773: RM0433                                                General-purpose timers (TIM15/TIM16/TIM17)
Page 1774: General-purpose timers (TIM15/TIM16/TIM17)                                                           RM0433
Page 1774: initial value. Before starting (when the timer is waiting for the trigger), the configuration must
Page 1775: RM0433                                                General-purpose timers (TIM15/TIM16/TIM17)
Page 1775: The timer must be in Slave mode, with the bits SMS[3:0] = ‘1000’ (Combined Reset + trigger
Page 1775: If the timer is configured in Up-counting mode, the corresponding CCRx must be set to 0
Page 1775: (the ARR register sets the pulse length). If the timer is configured in Down-counting mode,
Page 1776: General-purpose timers (TIM15/TIM16/TIM17)                                                     RM0433
Page 1776: Interrupt Flag UIF into bit 31 of the timer counter register (TIMxCNT[31]). This allows to
Page 1777: RM0433                                                General-purpose timers (TIM15/TIM16/TIM17)
Page 1777: 40.4.17   Timer input XOR function (TIM15 only)
Page 1777: The XOR output can be used with all the timer input functions such as trigger or input
Page 1778: General-purpose timers (TIM15/TIM16/TIM17)                                                         RM0433
Page 1778: The TIM timers are linked together internally for timer synchronization or chaining.
Page 1778: The TIM15 timer can be synchronized with an external trigger in several modes: Reset
Page 1778: 2.   Configure the timer in reset mode by writing SMS=100 in TIMx_SMCR register. Select
Page 1779: RM0433                                                General-purpose timers (TIM15/TIM16/TIM17)
Page 1779: 2.   Configure the timer in gated mode by writing SMS=101 in TIMx_SMCR register. Select
Page 1780: General-purpose timers (TIM15/TIM16/TIM17)                                                          RM0433
Page 1780: 2.   Configure the timer in trigger mode by writing SMS=110 in the TIMx_SMCR register.
Page 1780: The TIMx timers have the capability to generate multiple DMA requests on a single event.
Page 1780: The main purpose is to be able to re-program several timer registers multiple times without
Page 1780: On a given timer event, the timer launches a sequence of DMA requests (burst). Each write
Page 1780: into the TIMx_DMAR register is actually redirected to one of the timer registers.
Page 1781: RM0433                                               General-purpose timers (TIM15/TIM16/TIM17)
Page 1781: The DBL[4:0] bits in the TIMx_DCR register set the DMA burst length. The timer recognizes
Page 1781: For example, the timer DMA burst feature could be used to update the contents of the CCRx
Page 1782: General-purpose timers (TIM15/TIM16/TIM17)                                                       RM0433
Page 1782: 40.4.21     Timer synchronization (TIM15)
Page 1782: The TIMx timers are linked together internally for timer synchronization or chaining. Refer to
Page 1782: Section 38.3.19: Timer synchronization for details.
Page 1782: Note:       The clock of the slave peripherals (timer, ADC, ...) receiving the TRGO or the TRGO2
Page 1782: signals must be enabled prior to receive events from the master timer, and the clock
Page 1782: master timer.
Page 1783: RM0433                                                                General-purpose timers (TIM15/TIM16/TIM17)
Page 1783: This bitfield indicates the division ratio between the timer clock (CK_INT) frequency and the
Page 1784: General-purpose timers (TIM15/TIM16/TIM17)                                                                   RM0433
Page 1785: RM0433                                                      General-purpose timers (TIM15/TIM16/TIM17)
Page 1785: These bits allow to select the information to be sent in master mode to slave timers for
Page 1785: useful to start several timers at the same time or to control a window in which a slave timer is
Page 1785: timer can then be used as a prescaler for a slave timer.
Page 1786: General-purpose timers (TIM15/TIM16/TIM17)                                                                            RM0433
Page 1786: synchronization between the current timer and its slaves (through TRGO). It is useful if we
Page 1786: want to synchronize several timers on a single external event.
Page 1786: 00101: Filtered Timer Input 1 (TI1FP1)
Page 1786: 00110: Filtered Timer Input 2 (TI2FP2)
Page 1786: meaning for each Timer.
Page 1787: RM0433                                                               General-purpose timers (TIM15/TIM16/TIM17)
Page 1787: Note: The clock of the slave peripherals (timer, ADC, ...) receiving the TRGO or the TRGO2
Page 1787: signals must be enabled prior to receive events from the master timer, and the clock
Page 1787: the master timer.
Page 1788: General-purpose timers (TIM15/TIM16/TIM17)                                                                          RM0433
Page 1789: RM0433                                                       General-purpose timers (TIM15/TIM16/TIM17)
Page 1790: General-purpose timers (TIM15/TIM16/TIM17)                                                                       RM0433
Page 1791: RM0433                                                               General-purpose timers (TIM15/TIM16/TIM17)
Page 1792: General-purpose timers (TIM15/TIM16/TIM17)                                                                RM0433
Page 1793: RM0433                                                     General-purpose timers (TIM15/TIM16/TIM17)
Page 1794: General-purpose timers (TIM15/TIM16/TIM17)                                                                  RM0433
Page 1795: RM0433                                                              General-purpose timers (TIM15/TIM16/TIM17)
Page 1796: General-purpose timers (TIM15/TIM16/TIM17)                                                                RM0433
Page 1797: RM0433                                                            General-purpose timers (TIM15/TIM16/TIM17)
Page 1797: Output Disabled (not driven by the timer: Hi-Z)
Page 1797: 0           0         1       by the timer: Hi-Z)
Page 1797: 0           1         0                           the timer: Hi-Z)
Page 1797: 0                       X         X       Output disabled (not driven by the timer anymore). The
Page 1798: General-purpose timers (TIM15/TIM16/TIM17)                                                                        RM0433
Page 1799: RM0433                                                              General-purpose timers (TIM15/TIM16/TIM17)
Page 1800: General-purpose timers (TIM15/TIM16/TIM17)                                                                   RM0433
Page 1801: RM0433                                                        General-purpose timers (TIM15/TIM16/TIM17)
Page 1802: General-purpose timers (TIM15/TIM16/TIM17)                                                                 RM0433
Page 1802: in the timer.
Page 1802: 0: When inactive, OC/OCN outputs are disabled (the timer releases the output control which
Page 1802: or CCxNE=1 (the output is still controlled by the timer).
Page 1803: RM0433                                                              General-purpose timers (TIM15/TIM16/TIM17)
Page 1803: This 5-bit field defines the length of DMA transfers (the timer recognizes a burst transfer
Page 1804: General-purpose timers (TIM15/TIM16/TIM17)                                                                     RM0433
Page 1804: This bit enables the dfsdm1_break[0] for the timer’s BRK input. dfsdm1_break[0] output is
Page 1804: This bit enables the COMP2 for the timer’s BRK input. COMP2 output is ‘ORed’ with the
Page 1805: RM0433                                                              General-purpose timers (TIM15/TIM16/TIM17)
Page 1805: This bit enables the COMP1 for the timer’s BRK input. COMP1 output is ‘ORed’ with the
Page 1805: This bit enables the BKIN alternate function input for the timer’s BRK input. BKIN input is
Page 1806: General-purpose timers (TIM15/TIM16/TIM17)
Page 1807: General-purpose timers (TIM15/TIM16/TIM17)
Page 1808: General-purpose timers (TIM15/TIM16/TIM17)                                                                        RM0433
Page 1808: This bit-field indicates the division ratio between the timer clock (CK_INT) frequency and the
Page 1809: RM0433                                                              General-purpose timers (TIM15/TIM16/TIM17)
Page 1810: General-purpose timers (TIM15/TIM16/TIM17)                                                                      RM0433
Page 1811: RM0433                                                              General-purpose timers (TIM15/TIM16/TIM17)
Page 1812: General-purpose timers (TIM15/TIM16/TIM17)                                                                       RM0433
Page 1813: RM0433                                                             General-purpose timers (TIM15/TIM16/TIM17)
Page 1814: General-purpose timers (TIM15/TIM16/TIM17)                                                                  RM0433
Page 1815: RM0433                                                               General-purpose timers (TIM15/TIM16/TIM17)
Page 1816: General-purpose timers (TIM15/TIM16/TIM17)                                                                    RM0433
Page 1817: RM0433                                                                        General-purpose timers (TIM15/TIM16/TIM17)
Page 1817: Output Disabled (not driven by the timer: Hi-Z)
Page 1817: 0             0           1       by the timer: Hi-Z)
Page 1817: 0             1           0                           the timer: Hi-Z)
Page 1817: 0                           X           X       Output disabled (not driven by the timer anymore). The
Page 1818: General-purpose timers (TIM15/TIM16/TIM17)                                                                     RM0433
Page 1819: RM0433                                                              General-purpose timers (TIM15/TIM16/TIM17)
Page 1820: General-purpose timers (TIM15/TIM16/TIM17)                                                                     RM0433
Page 1821: RM0433                                                   General-purpose timers (TIM15/TIM16/TIM17)
Page 1821: in the timer.
Page 1821: 0: When inactive, OC/OCN outputs are disabled (the timer releases the output control which
Page 1821: or CCxNE=1 (the output is still controlled by the timer).
Page 1822: General-purpose timers (TIM15/TIM16/TIM17)                                                                      RM0433
Page 1823: RM0433                                                              General-purpose timers (TIM15/TIM16/TIM17)
Page 1823: This 5-bit field defines the length of DMA transfers (the timer recognizes a burst transfer
Page 1824: General-purpose timers (TIM15/TIM16/TIM17)                                                                    RM0433
Page 1824: This bit enables the dfsdm1_break[1] for the timer’s BRK input. dfsdm1_break[1] output is
Page 1825: RM0433                                                             General-purpose timers (TIM15/TIM16/TIM17)
Page 1825: This bit enables the COMP2 for the timer’s BRK input. COMP2 output is ‘ORed’ with the
Page 1825: This bit enables the COMP1 for the timer’s BRK input. COMP1 output is ‘ORed’ with the
Page 1825: This bit enables the BKIN alternate function input for the timer’s BRK input. BKIN input is
Page 1826: General-purpose timers (TIM15/TIM16/TIM17)                                                                    RM0433
Page 1826: This bit enables the dfsdm1_break[2] for the timer’s BRK input. dfsdm1_break[2] output is
Page 1827: RM0433                                                           General-purpose timers (TIM15/TIM16/TIM17)
Page 1827: This bit enables the COMP2 for the timer’s BRK input. COMP2 output is ‘ORed’ with the
Page 1827: This bit enables the COMP1 for the timer’s BRK input. COMP1 output is ‘ORed’ with the
Page 1827: This bit enables the BKIN alternate function input for the timer’s BRK input. BKIN input is
Page 1828: General-purpose timers (TIM15/TIM16/TIM17)
Page 1829: General-purpose timers (TIM15/TIM16/TIM17)
Page 1830: Basic timers (TIM6/TIM7)                                                                                                                   RM0433
Page 1830: 41          Basic timers (TIM6/TIM7)
Page 1830: The basic timers TIM6 and TIM7 consist of a 16-bit auto-reload counter driven by a
Page 1830: They may be used as generic timers for time-base generation but they are also specifically
Page 1830: used to drive the digital-to-analog converter (DAC). In fact, the timers are internally
Page 1830: The timers are completely independent, and do not share any resources.
Page 1830: Basic timer (TIM6/TIM7) features include:
Page 1830: Figure 511. Basic timer block diagram
Page 1831: RM0433                                                                     Basic timers (TIM6/TIM7)
Page 1831: The main block of the programmable timer is a 16-bit upcounter with its related auto-reload
Page 1832: Basic timers (TIM6/TIM7)                                                                                                                    RM0433
Page 1832: Timerclock = CK_CNT
Page 1832: Timerclock = CK_CNT
Page 1833: RM0433                                                                       Basic timers (TIM6/TIM7)
Page 1833: Timerclock = CK_CNT
Page 1834: Basic timers (TIM6/TIM7)                                                                           RM0433
Page 1834: Timerclock = CK_CNT
Page 1834: Timerclock = CK_CNT
Page 1835: RM0433                                                                                 Basic timers (TIM6/TIM7)
Page 1835: Timerclock = CK_CNT
Page 1835: Timerclock = CK_CNT
Page 1836: Basic timers (TIM6/TIM7)                                                                                        RM0433
Page 1836: Timerclock = CK_CNT
Page 1836: Interrupt Flag UIF into the timer counter register’s bit 31 (TIMxCNT[31]). This allows to
Page 1837: RM0433                                                                                             Basic timers (TIM6/TIM7)
Page 1838: Basic timers (TIM6/TIM7)                                                                                   RM0433
Page 1839: RM0433                                                                                           Basic timers (TIM6/TIM7)
Page 1839: These bits are used to select the information to be sent in master mode to slave timers for
Page 1839: useful to start several timers at the same time or to control a window in which a slave timer
Page 1839: master timer can then be used as a prescaler for a slave timer.
Page 1839: Note: The clock of the slave timer or ADC must be enabled prior to receive events from the
Page 1839: master timer, and must not be changed on-the-fly while triggers are received from the
Page 1839: master timer.
Page 1840: Basic timers (TIM6/TIM7)                                                                                        RM0433
Page 1840: 1: Re-initializes the timer counter and generates an update of the registers. Note that the
Page 1841: RM0433                                                                                  Basic timers (TIM6/TIM7)
Page 1842: Basic timers (TIM6/TIM7)
Page 1843: RM0433                                                                       Low-power timer (LPTIM)
Page 1843: 42       Low-power timer (LPTIM)
Page 1843: The LPTIM is a 16-bit timer that benefits from the ultimate developments in power
Page 1844: Low-power timer (LPTIM)                                                                                                    RM0433
Page 1844: Figure 521. Low-power timer block diagram (LPTIM1 and LPTIM2)
Page 1845: RM0433                                                                                                                                              Low-power timer (LPTIM)
Page 1845: Figure 522. Low-power timer block diagram (LPTIM3)
Page 1845: Figure 523. Low-power timer block diagram (LPTIM4 and LPTIM5)
Page 1846: Low-power timer (LPTIM)                                                                                  RM0433
Page 1847: RM0433                                                     Low-power timer (LPTIM)
Page 1848: Low-power timer (LPTIM)                                                                         RM0433
Page 1849: RM0433                                                                        Low-power timer (LPTIM)
Page 1850: Low-power timer (LPTIM)                                                                                 RM0433
Page 1851: RM0433                                                                       Low-power timer (LPTIM)
Page 1851: detection, a two-counter-clock period latency is needed before the timer starts running due
Page 1851: If a new trigger event occurs when the timer is already started it will be ignored (unless
Page 1851: Note:    The timer must be enabled before setting the SNGSTRT/CNTSTRT bits. Any write on these
Page 1851: bits when the timer is disabled will be discarded by hardware.
Page 1851: •    The Continuous mode: the timer is free running, the timer is started from a trigger event
Page 1851: and never stops until the timer is disabled
Page 1851: •    One-shot mode: the timer is started from a trigger event and stops when reaching the
Page 1851: A new trigger event will re-start the timer. Any trigger event occurring after the counter starts
Page 1852: Low-power timer (LPTIM)                                                                             RM0433
Page 1853: RM0433                                                                          Low-power timer (LPTIM)
Page 1853: SNGSTRT and CNTSTRT bits can only be set when the timer is enabled (The ENABLE bit
Page 1853: The first trigger event will start the timer, any successive trigger event will reset the counter
Page 1853: and the timer will restart.
Page 1853: The first trigger event will start the timer, any successive trigger event will reset the counter
Page 1853: and the timer will restart.
Page 1853: The timer can generate the following waveforms:
Page 1854: Low-power timer (LPTIM)                                                                          RM0433
Page 1854: before the timer is enabled.
Page 1854: bus write operation, or at the end of the current period if the timer is already started.
Page 1854: are updated at the end of the current period, if the timer has been already started.
Page 1855: RM0433                                                                      Low-power timer (LPTIM)
Page 1856: Low-power timer (LPTIM)                                                                         RM0433
Page 1856: 42.4.13     Timer enable
Page 1856: 42.4.14     Timer counter reset
Page 1857: RM0433                                                                        Low-power timer (LPTIM)
Page 1858: Low-power timer (LPTIM)                                                                                 RM0433
Page 1859: RM0433                                                                                           Low-power timer (LPTIM)
Page 1860: Low-power timer (LPTIM)                                                                                   RM0433
Page 1860: input has occurred. If the trigger is ignored because the timer has already started, then this flag is
Page 1861: RM0433                                                                                      Low-power timer (LPTIM)
Page 1862: Low-power timer (LPTIM)                                                                                        RM0433
Page 1863: RM0433                                                                                    Low-power timer (LPTIM)
Page 1864: Low-power timer (LPTIM)                                                                                    RM0433
Page 1864: 0: A trigger event arriving when the timer is already started will be ignored
Page 1864: 1: A trigger event arriving when the timer is already started will reset and restart the counter
Page 1865: RM0433                                                                               Low-power timer (LPTIM)
Page 1866: Low-power timer (LPTIM)                                                                                          RM0433
Page 1867: RM0433                                                                                 Low-power timer (LPTIM)
Page 1867: place after a synchronization delay of 3 LPTimer core clock cycles (LPTimer core clock may be
Page 1867: Bit 2 CNTSTRT: Timer start in Continuous mode
Page 1867: If the software start is disabled (TRIGEN[1:0] different than ‘00’), setting this bit starts the timer in
Page 1867: If this bit is set when a single pulse mode counting is ongoing, then the timer will not stop at the next
Page 1868: Low-power timer (LPTIM)                                                                                      RM0433
Page 1869: RM0433                                                                                     Low-power timer (LPTIM)
Page 1870: Low-power timer (LPTIM)                                                                                       RM0433
Page 1871: Low-power timer (LPTIM)
Page 1872: Low-power timer (LPTIM)                                                                 RM0433
Page 1878: Bits 13:11 WDGTB[2:0]: Timer base
Page 1889: The real-time clock (RTC) is an independent BCD timer/counter. The RTC provides a time-
Page 1891: auto reload timer
Page 1895: wakeup auto-reload timer. To obtain short timeout periods, the 16-bit wakeup auto-reload
Page 1895: timer can also run with the RTCCLK divided by the programmable 4-bit asynchronous
Page 1896: The wakeup timer range can be extended to 17 bits.
Page 1897: The wakeup timer clock input can be:
Page 1897: complete (see Programming the wakeup timer on page 1898), the timer starts
Page 1897: the wakeup timer.
Page 1898: Programming the wakeup timer
Page 1898: The following sequence is required to configure or change the wakeup timer auto-reload
Page 1899: 1.   Clear WUTE in RTC_CR to disable the wakeup timer.
Page 1899: (WUCKSEL[2:0] bits in RTC_CR). Set WUTE in RTC_CR to enable the timer again.
Page 1899: The wakeup timer restarts down-counting. The WUTWF bit is cleared up to 2 RTCCLK
Page 1900: (RTC_TAMPCR), the RTC backup registers (RTC_BKPxR), the wakeup timer register
Page 1904: •    generate a hardware trigger for the low-power timers
Page 1905: The tamper event detection can be used as trigger input by the low-power timers.
Page 1905: register. This configuration allows to trig automatically the low-power timers in Stop mode,
Page 1908: To enable the Wakeup timer interrupt, the following sequence is required:
Page 1908: 1.   Configure and enable the EXTI line corresponding to the Wakeup timer even in
Page 1908: 3.   Configure the RTC to detect the RTC Wakeup timer event.
Page 1908: Wakeup timer interrupt              WUTF        WUTIE          yes        yes(1)          yes(1)
Page 1912: Bit 14 WUTIE: Wakeup timer interrupt enable
Page 1912: 0: Wakeup timer interrupt disabled
Page 1912: 1: Wakeup timer interrupt enabled
Page 1912: Bit 10 WUTE: Wakeup timer enable
Page 1912: 0: Wakeup timer disabled
Page 1912: 1: Wakeup timer enabled
Page 1912: Note: When the wakeup timer is disabled, wait for WUTWF=1 before enabling it again.
Page 1915: Bit 10 WUTF: Wakeup timer flag
Page 1916: Bit 2 WUTWF: Wakeup timer write flag
Page 1916: wakeup timer values can be changed when WUTE bit is cleared and WUTWF is set.
Page 1916: 0: Wakeup timer configuration update not allowed
Page 1916: 1: Wakeup timer configuration update allowed
Page 1918: 45.6.6          RTC wakeup timer register (RTC_WUTR)
Page 1918: When the wakeup timer is enabled (WUTE set to 1), the WUTF flag is set every (WUT[15:0]
Page 1918: When WUCKSEL[2] = 1, the wakeup timer becomes 17-bits and WUCKSEL[1] effectively
Page 1918: becomes WUT[16] the most-significant bit to be reloaded into the timer.
Page 1970: This peripheral embeds hardware timers in order to be compliant with the 3 timeouts defined
Page 1972: I2C_TIMEOUTR register. The timers must be programmed in such a way that they detect a
Page 1972: programmed with the timer reload value in order to check the tTIMEOUT parameter. The
Page 1972: Then the timer is enabled by setting the TIMOUTEN in the I2C_TIMEOUTR register.
Page 1972: TIMEOUTB timer must be configured in order to check tLOW:SEXT for a slave and
Page 1972: Then the timer is enabled by setting the TEXTEN bit in the I2C_TIMEOUTR register.
Page 1972: with the timer reload value in order to obtain the tIDLE parameter. The TIDLE bit must be
Page 1972: Then the timer is enabled by setting the TIMOUTEN bit in the I2C_TIMEOUTR register.
Page 2271: This signal can be connected to timer events, in order to compute frequency drift.
Page 2277: The search of the longest and shortest transition is stopped when the transition timer
Page 2277: expires. The transition timer is like a watchdog timer that generates a trigger after 70
Page 2359: flag      timer     logic
Page 2361: –    When WAITINT bit is 0 the command timer starts running and the CPSM waits for
Page 2361: –    When WAITINT bit is 1, the timer is disabled and the CPSM waits for an interrupt
Page 2366: flag     timer       logic
Page 2373: The data timer (DATATIME) is enabled when the DPSM is in the Wait_R or Busy state 2
Page 2410: 54.8.7         SDMMC data timer register (SDMMC_DTIMER)
Page 2410: The SDMMC_DTIMER register contains the data timeout period, in card bus clock periods.
Page 2410: A counter loads the value from the SDMMC_DTIMER register, and starts decrementing
Page 2410: when the data path state machine (DPSM) enters the Wait_R or Busy state. If the timer
Page 2411: Note:           A data transfer must be written to the data timer register and the data length register before
Page 2411: size (see SDMMC_DCTRL). A data transfer must be written to the data timer register and
Page 2421: 54.8.14        SDMMC acknowledgment timer register (SDMMC_ACKTIMER)
Page 2421: The SDMMC_ACKTIMER register contains the acknowledgment timeout period, in
Page 2421: A counter loads the value from the SDMMC_ACKTIMER register, and starts decrementing
Page 2421: when the data path state machine (DPSM) enters the Wait_Ack state. If the timer reaches 0
Page 2422: Note:          The data transfer must be written to the acknowledgment timer register before being written
Page 2425: 0x024    DTIMER
Page 2426: ACKTIMER
Page 2564: –    SOF pulse internal connection to timer (TIMx)
Page 2579: cycles. The SOF pulse is also internally connected to the input trigger of the timer, so that
Page 2579: the input capture feature, the output compare feature and the timer can be triggered by the
Page 2579: timer can be triggered by the SOF pulse.
Page 2581: Frame timer
Page 2621: timer has expired. To stop the PHY clock, the application must set the STPPCLK bit in
Page 2754: 6.   By default, the MAC is programmed for watchdog timer to be enabled, that is, packets
Page 2754: watchdog timer (bit 16 of Watchdog timeout register (ETH_MACWTR)) to override the
Page 2754: fixed timeout of 2,048 or 10,240 bytes. You can disable the watchdog timer by
Page 2754: However, even if the watchdog timer is disabled, a packet greater than 32 Kbytes is cut
Page 2799: 2.   Starts the LPI TW TIMER:
Page 2799: indicated by the value in LPI entry timer register (ETH_MACLETR). In this mode also, the
Page 2804: In addition to above, an interrupt timer (ETH_DMACRXIWTR: Channel Rx Interrupt
Page 2804: Watchdog Timer) is given for flexible control and periodic scheduling of Receive Interrupt.
Page 2804: When this interrupt timer is programmed with a nonzero value, it gets activated as soon as
Page 2804: timer runs out as per the programmed value, RI bit is set and the interrupt is asserted if the
Page 2804: register (ETH_DMACIER)). The timer is stopped and cleared before it expires, if the RI is
Page 2804: set for a packet transfer whose descriptor’s IOC was set. The timer is reactivated
Page 2811: EEE capability. Then negotiate the timer values.
Page 2811: 3.   Program bits 25 to 16 and bits 1 to 0 in LPI timers control register (ETH_MACLTCR).
Page 2811: 7.   Program the LPIET bit in the LPI entry timer register (ETH_MACLETR) with the IDLE
Page 2812: 11. Program the LPIET bit in LPI entry timer register (ETH_MACLETR) register with the
Page 2837: When this bit is set, it indicates that the Receive Watchdog Timer has
Page 2858: Channel Rx interrupt watchdog timer register (ETH_DMACRXIWTR)
Page 2858: The Receive Interrupt Watchdog Timer register indicates the watchdog timeout for Receive
Page 2858: the watchdog timer for the RI bit of the ETH_DMACSR register.
Page 2858: Bits 7:0 RWT[7:0]: Receive Interrupt Watchdog Timer Count
Page 2858: field, for which the watchdog timer is set.
Page 2858: The watchdog timer is triggered with the programmed value after the Rx DMA completes the
Page 2858: When the watchdog timer runs out, the RI bit is set and the timer is stopped. The watchdog
Page 2858: timer is reset when the RI bit is set high because of automatic setting of RI as per the
Page 2882: When this bit is set, the MAC disables the watchdog timer on the receiver. The MAC can
Page 2882: When this bit is set, the MAC disables the jabber timer on the transmitter. The MAC can
Page 2883: then defer again after back off completion. In such a scenario, the deferral timer is reset to 0,
Page 2899: This field configures the threshold of the Pause timer at which the input flow is checked for
Page 2904: This bit indicates that the Transmit Jabber Timer expired which happens when the packet
Page 2910: Bit 20 LPITE: LPI Timer Enable
Page 2910: When LPITE is 0, the LPI Auto timer is disabled and MAC Transmitter enters LPI state based
Page 2910: LPI LS TIMER.
Page 2910: When this bit is set, the MAC uses the PLS bit for the LPI LS Timer trigger. When this bit is
Page 2910: when the link status is up (OKAY) at least for the time indicated by the LPI LS TIMER.
Page 2911: application cleared the LPIEN bit and the LPI TW Timer has expired. This bit is cleared by a
Page 2911: LPI timers control register (ETH_MACLTCR)
Page 2911: The LPI Timers Control register controls the timeout values in the LPI states. It specifies the
Page 2911: Bits 25:16 LST[9:0]: LPI LS Timer
Page 2911: not transmit the LPI pattern even when the LPIEN bit is set unless the LPI LS Timer reaches
Page 2911: the programmed terminal count. The default value of the LPI LS Timer is 1000 (1 sec) as
Page 2911: Bits 15:0 TWT[15:0]: LPI TW Timer
Page 2911: TLPIEX status bit is set after the expiry of this timer.
Page 2912: LPI entry timer register (ETH_MACLETR)
Page 2912: The LPI Entry Timer Register is used to store the LPI Idle Timer Value in Micro-Seconds.
Page 2912: Bits 19:3 LPIET[16:0]: LPI Entry Timer
Page 2912: Bits [2:0] are read-only so that the granularity of this timer is in steps of 8 micro-seconds.
Page 2912: LPI timers. This timer has to be programmed by the software initially.
Page 2933: Tx LPI microsecond timer register (TX_LPI_USEC_CNTR)
Page 2933: and Exit, the Timer value can have an error of +/- 1 microsecond.
Page 2934: and Exit, the Timer value can have an error of +/- 1 microsecond.
Page 2983: when a bus-idle or line error condition is detected. If the SFT timer is completed at the time
Page 2983: timer is still running instead, the system waits until the timer elapses before transmission
Page 2983: In case of SFTOPT = 1 a bus-event condition starting the SFT timer is detected in the
Page 2983: •    In case of a transmission error detection, SFT timer starts when the TXERR
Page 2983: •    In case of a missing acknowledge from the CEC follower, the SFT timer starts when the
Page 2983: •    In case of a transmission underrun error, the SFT timer starts when the TXUDR bit is
Page 2983: •    In case of a receive error detection implying reception abort, the SFT timer starts at the
Page 2983: SFT timer is restarted as soon as the bus comes back to hi-impedance idleness.
Page 2991: 0: SFT timer starts when TXSOM is set by software
Page 2991: 1: SFT timer starts automatically at the end of message transmission/reception.
Page 3131: •          stop the clock to certain peripherals (CAN, SMBUS timeout, Watchdogs, Timers, RTC)
Page 3131: when either processor core is stopped in debug mode. For timers having
Page 3153: Enables use of POSTCNT counter as a timer for Periodic PC sample packet generation.
Page 3220: Section 37: High-Resolution Timer (HRTIM)
Page 3220: Updated internal signals in Figure 274: High-resolution timer block
Page 3220: Section 43: Low-power timer (LPTIM)
Page 3220: Added internal signals in Figure 515: Low-power timer block
Page 3220: diagram (LPTIM1 and LPTIM2), Figure 516: Low-power timer block
Page 3220: diagram (LPTIM3) and Figure 517: Low-power timer block diagram
Page 3221: Section 43: Low-power timer (LPTIM) (continued)
Page 3225: Section 37: High-Resolution Timer (HRTIM)
Page 3230: Section 37: Advanced-control timers (TIM1/TIM8)
Page 3230: Section 38: General-purpose timers (TIM2/TIM3/TIM4/TIM5)
Page 3230: Added TIM4 timer input selection register (TIM4_TISEL).
Page 3231: Section 40: General-purpose timers (TIM15/TIM16/TIM17)
Page 3231: Section 42: Low-power timer (LPTIM)
Page 3244: SDMMC_ACKTIMER . . . . . . . . . . . . . . . . . .2421
Page 3244: SDMMC_DTIMER . . . . . . . . . . . . . . . . . . . .2410
